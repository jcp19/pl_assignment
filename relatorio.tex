\documentclass{report}
\usepackage[portuges]{babel}
%\usepackage[utf8]{inputenc}
\usepackage[latin1]{inputenc}
\usepackage{hyperref}

\usepackage{url}
\usepackage{enumerate}

%\usepackage{alltt}
%\usepackage{fancyvrb}
\usepackage{listings}
%LISTING - GENERAL
\lstset{
	basicstyle=\small,
	numbers=left,
	numberstyle=\tiny,
	numbersep=5pt,
	breaklines=true,
    frame=tB,
	mathescape=true,
	escapeinside={(*@}{@*)}
}
%
%\lstset{ %
%	language=Java,							% choose the language of the code
%	basicstyle=\ttfamily\footnotesize,		% the size of the fonts that are used for the code
%	keywordstyle=\bfseries,					% set the keyword style
%	%numbers=left,							% where to put the line-numbers
%	numberstyle=\scriptsize,				% the size of the fonts that are used for the line-numbers
%	stepnumber=2,							% the step between two line-numbers. If it's 1 each line
%											% will be numbered
%	numbersep=5pt,							% how far the line-numbers are from the code
%	backgroundcolor=\color{white},			% choose the background color. You must add \usepackage{color}
%	showspaces=false,						% show spaces adding particular underscores
%	showstringspaces=false,					% underline spaces within strings
%	showtabs=false,							% show tabs within strings adding particular underscores
%	frame=none,								% adds a frame around the code
%	%abovecaptionskip=-.8em,
%	%belowcaptionskip=.7em,
%	tabsize=2,								% sets default tabsize to 2 spaces
%	captionpos=b,							% sets the caption-position to bottom
%	breaklines=true,						% sets automatic line breaking
%	breakatwhitespace=false,				% sets if automatic breaks should only happen at whitespace
%	title=\lstname,							% show the filename of files included with \lstinputlisting;
%											% also try caption instead of title
%	escapeinside={\%*}{*)},					% if you want to add a comment within your code
%	morekeywords={*,...}					% if you want to add more keywords to the set
%}

\usepackage{xspace}

\parindent=0pt
\parskip=2pt

\setlength{\oddsidemargin}{-1cm}
\setlength{\textwidth}{18cm}
\setlength{\headsep}{-1cm}
\setlength{\textheight}{23cm}

\def\pe{\emph{Publicação Eletrónica}\xspace}

\def\titulo#1{\section{#1}}
\def\super#1{{\em Supervisor: #1}\\ }
\def\area#1{{\em \'{A}rea: #1}\\[0.2cm]}
\def\resumo{\underline{Resumo}:\\ }


%%%%\input{LPgeneralDefintions}

\title{ Processamento de Linguagens (3º ano de MIEI)\\ \textbf{Trabalho Prático Nº1 - Parte A}\\ Relatório de Desenvolvimento}
\author{João Pereira\\ (A75273) \and João Martins\\ (A68646) \and Manuel Freitas\\ (A71646) }
\date{\today}

\begin{document}

\maketitle

\begin{abstract}
	Os processadores de linguagens são, por natureza, ferramentas muito poderosas. Para demonstrar a sua utilidade desenvolvemos
	dois processadores de linguagens para resolver dois problemas diferentes.
	O primeiro foi desenvolvido para processar extratos mensais da Via Verde e fornecer ao seu utilizador dados 
	úteis acerca dos mesmos. O segundo teve como objetivo facilitar a criação de um album fotográfico a partir de um ficheiro
	de metadados anotado no formato \emph{.xml}.
	Neste relatório, discute-se o desenho e implementação em GAWK dos dois processadores de linguagens.
\end{abstract}

\tableofcontents

\chapter{Introdução} \label{intro}

%\super{Pedro Rnagel Henriques}
%\titulo{Desenvolvimento de Processadores de Linguagens Regulares utilizando GAWK}
%\area{Processamento de Linguagens}
%blablabla
%\super{José João}
%\titulo{Um belo Dia em Briteiros}


%\begin{description}
  %\item [Enquadramento] \textbf{bla bla} bla bla
  %\item [Conteúdo do documento] \textsf{ble ble} \texttt{ble} ble
  %\item [Resultados -- pontos a evidenciar] \textit{bli bli bli bli}
  %\item [Estrutura do documento] \underline{blo blo blo}
%\end{description}

%letras gregas são estas $ \alpha \beta \gamma \delta $ que aqui demonstro

%exemplo simples de fração \[ \frac{\frac{a * b + c}{4-3}}{3*5} \] simples

%Mais exemplos de listas enumeradas mas agora com letras:
%\begin{enumerate}[a)]
%\item Listar todas as Pessoas identificadas, sem repetições;
%\item Listar os Países e Cidades marcadas;
%\item Listar as Organizações.
%\end{enumerate}

%A mesma enumeração mas no standard numérico
%\begin{description}
%\item[Etape 1:] Listar todas as Pessoas identificadas, sem repetições;
%\item[Etape 2:] Listar os Países e Cidades marcadas;
%\item[Etape 3:] Listar as Organizações.
%\end{description} 

\section*{Estrutura do Relatório} \
explicar como está organizado o documento, referindo os capítulos existentes em~\cite{Pereira201635}
e a sua articulação explicando o conteúdo de cada um.
No capítulo~\ref{ae} faz-se uma análise detalhada do problema proposto
de modo a poder-se especificar  as entradas, resultados e formas de transformação.\\
etc. \ldots\\
No capítulo~\ref{concl} termina-se o relatório com uma síntese do que foi dito,
as conclusões e o trabalho futuro

\chapter{Via Verde}
\section{Análise e Especificação} \label{ae}
\subsection{Descrição informal do problema}
\subsection{Especificação do Requisitos}
\subsubsection{Dados}
\subsubsection{Pedidos}
\subsubsection{Relações}

\section{Concepção/desenho da Resolução}
\subsection{Estruturas de Dados}
\subsection{Algoritmos}

\section{Codificação e Testes}
\subsection{Alternativas, Decisões e Problemas de Implementação}
\subsection{Testes realizados e Resultados}
Mostram-se a seguir alguns testes feitos (valores introduzidos) e
os respectivos resultados obtidos:

%\VerbatimInput{teste1.txt}

\chapter{Album Fotográfico}
\section{Análise e Especificação} \label{ae}
\subsection{Descrição informal do problema}
Pretende-se que a partir de um ficheiro de metadados em \emph{xml}, com informação sobre várias fotos, se construa um album fotográfico.
Para além disso, pretende-se que sejam listados todos os locais fotografados, sem repetições. Para tal, espera-se que o ficheiro de metadados
siga uma determinada estrutura que será descrita posteriormente. 
\subsection{Especificação do Requisitos}
Com base no que foi pedido, o grupo definiu que o programa deve cumprir os seguintes requisitos mínimos:
\begin{itemize}  
\item Apresentar na página html as fotografias referenciadas no ficheiro de metadados, juntamente com as pessoas que nela aparecem; 
\item Apresentar na página html uma lista sem repetições do locais fotografados. 
\end{itemize}
Para além disso, o grupo entendeu que o trabalho deveria cumprir também os seguintes requisitos por forma a que o resultado final 
fosse interessante e útil:
\begin{itemize}  
\item ordenar as fotos cuja data é conhecida por ordem cronológica. As fotos cuja data é desconhecida deverão ser apresentadas incialmente; 
\item ordenar os locais fotografados por ordem alfabética;
\item apresentar para além das fotos e das pessoas que nelas aparecem,
o local onde foi tirada a foto (quando este dado for fornecido) e
a data em que a mesma foi tirada (quando houver esta informação). 
Se a fotografia tiver alguma descrição ou facto associado a ela, também se pretende que tal seja apresentado.
\item dado que o problema surge no âmbito do Museu da Pessoa, pretende-se 
que a aparência da página html se assemelhe à aparência da página web do Museu da Pessoa;
\item pretende-se apresentar num único mapa os vários locais fotogrados no álbum;
\end{itemize}

\subsection{Formato do ficheiro de metadados}
O ficheiro de metadados consistirá num conjunto de elemntos \texttt{foto}
.Cada um desses elementos deverá ter um atributo \emph{ficheiro} que especifica o caminho para a fotografia a que diz respeito.
Entre as \emph{tags} de abertura e fecho estarão elementos \emph{xml} que dão informação à fotografia. Esses elementos podem ter um dos seguintes nomes:
\begin{itemize}
	\item \textbf{onde} - indica o local onde a fotografia foi tirada
	\item \textbf{quando} - indica quando é que a fotografia foi tirada.
Esta informação pode estar representada sob a forma de atributo \texttt{data} deste elemento ou pode ser obtida pelo valor entre a \emph{tag} 
de abertura e fecho do elemento, como se pode ver nos exemplos abaixo.
\begin{verbatim}
# exemplo 1: data armazenada no atributo "data"
<quando data="1961-01-15"/> 

# exemplo 2: data armazenada entre as tags de abertura e fecho
<quando>1977-12-19</quando> 
\end{verbatim}
A data deve seguir o formato \emph{ano/mes/dia}, sendo que os formatos \emph{ano/mes} e \emph{ano} também são válidos. Os campos do mês e do dia devem ter obrigatoriamente dois dígitos, mesmo que o primeiro seja o 0.
O utilizador do programa pode escolher qualquer símbolo que entender desde que o use em todo o ficheiro de metadados.
\item \textbf{quem} - indica quem são as pessoas presentes na fotografia;
\item \textbf{facto} - curiosidade acerca da fotografia referida;
\end{itemize}
Todos os elementos referidos acima são opcionais, dado que o programa terá uma execução correta, i.e. não ocorrerão casos de excepção, caso algum desses elementos seja omitido. 
No entanto, as fotos que não contenham um elemento \textbf{quem} não serão apresentadas.
A sequência de elementos \textbf{foto} pode estar opcionalmente inserida num elemento \textbf{fotos}.

\section{Concepção e Implementação da Resolução}
Para resolver o problema em causa, desenvolveu-se um programa em \emph{GAWK} cujo nome é \emph{album.gawk}. Este programa é invocado
da seguinte forma se só se pretender construir o album a partir de um ficheiro \emph{.xml}:
\begin{verbatim}
gawk -f album.gawk FILE
\end{verbatim}

Se se pretender construir o album a partir de vários ficheiros \emph{.xml}, pode-se fazê-lo invocando o programa da seguinte forma.
\begin{verbatim}
gawk -f album.gawk [FILE]
\end{verbatim}
\subsection{Codificação}
Nesta parte, será discutido o código produzido para resolver o problema. O código pode ser consultado na íntegra no apêndice deste relatório.
Começa-se por analisar as funções desenvolvidas para processar os elementos \emph{.xml}. Foram construídas duas funções:
\begin{itemize}
	\item \begin{verbatim} lerValorTag(nome_tag, linha) \end{verbatim} Esta função recebe como input, 
	por ordem, o nome do elemento a ser processado (por exemplo, \textbf{quando})
		e a linha a ser processada (por exemplo, \$0) e devolve o texto entre as tags de abertura e de fecho do primeiro elemento 
		encontrado ou '''' se não existir o elemento pretendido. O resultado é obtido através da função pré-definida \emph{match} que, juntamente com 
		a expressão regular \begin{verbatim}"<" nome_tag "(\\s+.*)*>(.*)</" nome_tag "\\s*>" \end{verbatim} permite que se extraia a informação pretendida.
	\item \begin{verbatim} lerAtributoTag(nome_tag, nome_atributo, linha) \end{verbatim} Esta função recebe como input, 
		por ordem, o nome do elemento a ser processado (por exemplo, \textbf{quando}), o atributo a ser lido (por exemplo, 
		\textbf{data})
		e a linha a ser processada (por exemplo, \$0) e devolve o valor do atributo no elemento especificado por \emph{nome\_tag} ou '''' se o atributo não for encontrado.
		Esta função recorre à função \emph{gensub} para eliminar a parte inicial da linha que não têm a informação pretendida. Depois lê-se o tipo de 
		aspas usadas para delimitar o valor do atributo e por fim recorre-se à função \emph{split} para separar o valor do atributo das aspas que o delimitam.
\end{itemize}
Foi também definida uma função \emph{url\_encode} que dada uma linha, devolve essa linha onde os caracteres reservados do formato URL
são substituídos pelas sequências respetivas. Esta função não faz uma tradução completa, apenas dos caracteres mais usados. O grupo tomou esta decisão
porque o ganho obtido por fazer uma função completa seria mínimo face à versão atual e consistiria apenas em fazer "mais do mesmo". Esta função recorre a invocações da \emph{gensub} para fazer as subsituições dos símbolos reservados.

Uma vez explicadas as funçõs definidas pelo grupo, podemos passar à descrição da implementação do programa. No início, 
definimos o FS como sendo o padrao \emph{</foto}. Desta forma, garantimos que quando encontramos a 
informação de uma foto, podemos aceder a todos os dados referentes a ela (por exemplo, o local e a data da fotografia) na mesma linha.
Ainda antes de lermos o conteúdo do ficheiro, escrevemos o cabeçalho \emph{html} no ficheiro de output. Esse cabeçalho inclui, entre outras 
coisas, a definição do tema da página. Dado que este problema surgiu no âmbito do Museu da Pessoa, o grupo considerou que fazia sentido replicar o tema do mesmo
e por isso, usou o ficheiro \emph{.css} usado no portal web do Museu da Pessoa.
De seguida, para todas as lihas que tenham um elemento \textbf{quem}, procuramos a informação relativa ao ficheiro a mostrar, a quem aparece na 
foto, onde foi tirada a foto e algum facto associado à mesma. Esta procura é feita recorrendo às funções referidas acima para obter informação 
dos elementos \emph{xml}. Os locais onde as fotografias são tiradas são armazenados num array associativo para mais tarde serem listados. Usando
o local como chave, garantimos que apenas uma cópia de cada local é guardada, nao havendo repetições de locais.
De seguida, os dados da imagem são formatados para estarem de acordo com o formato \emph{html} e são combinados numa linha para ser inserida na
página de output. Essa linha é guardada num array associativo, onde a chave é a própria linha e o valor é a data da fotografia a que a linha 
diz respeito. Desta forma, será possível posteriormente ordenar temporalmente as fotografias.

No final da leitura do ficheiro, as entradas são ordenadas por data, fazendo uso da função \emph{assorti} que ordena os indíces segundo o critério
passado como argumento, neste caso, por ordem crescente dos valores(datas). De seguida, as entradas são escritas no ficheiro \emph{html}.
A seguir, percorre-se o array com os locais visitados e ordenámo-lo alfabeticamente.
Para além disso, geramos um URL a partir dos nomes dos locais, processados pela função \emph{url\_encode}. Este URL é especificado pela API do \emph{Google Maps} e permite que se gere uma imagem de um mapa com os locais assinalados. A forma para gerar o URL é descrita em 
\url{https://developers.google.com/maps/documentation/static-maps/intro} e consiste em concatenar um URL base com o nome dos locais, convertidos para a codificação URL, separados por ''|''. De seguida, imprime-se para o ficheiro os locais ordenados alfabeticamente e sem repetições
e imprime-se a linha que faz com que apareça a imagem do mapa, seguida do rodapé da página.
\subsection{Testes}
Para testar o programa desenvolvido, o grupo fez uso do ficheiro \emph{legenda.xml} fornecido pelos professores. Este ficheiro teve, no entanto,
de sofrer algumas alterações para corrigir erros ortográficos e para estar de acordo com as convenções adotadas, nomeadamente no que toca
ao formato das datas. Para além disso, o grupo construiu um ficheiro de metadados sobre a vida de \emph{Jimi Hendrix} para testar este programa.
Este ficheiro tem o nome de \emph{hendrix.xml} e pode ser consultado no Apêndice A.
Em ambos os testes, o programa gerou corretamente a página e os resultados foram os esperados. Também testamos passar os dois ficheiros em 
simultâneo para gerar um album a partir dos dois ficheiros. Também neste caso os resultados obtidos foram os esperados: a página gerada apresenta as imagens e os seus dados corretamente, com uma ordenação temporal das fotografias correta.
Durante estes testes, deparamo-nos com uma limitação da API do \emph{Google Maps} que apenas permite, no máximo, que se mostrem 15 locais na
mesma imagem. No entanto, esta limitação técnica em nada diminui o interesse do resultado que obtivemos.


\chapter{Conclusão} \label{concl}
Neste trabalho, apercebemo-nos da grande versatilidade e utilidade dos processadores de linguagens. Com pouco código, fomos capazes de construir 
programas úteis e interessantes. Entendemos que realizamos um bom trabalho dado que fizemos tudo a que nos propusemos nos dois enunciados, 
ultrapassando largamente o que era pedido nos requisitos mínimos. Verificamos que o \emph{GAWK} nem sempre é a ferramenta mais adequada 
para analisar ficheiros \emph{xml} uma vez que leva à criação de expressões longas e muitas vezes, dificeis de ler. Também é dificíl analisar por
vezes a hierarquia de elementos do documento, no entanto, com a escolha correta de valores para o \emph{FS}, fomos capazes de ultrapassar
este problema. Devido à versatilidade do \emph{GAWK}, facilmente se poderão adicionar novas funcionalidades ao programa e permitir que se analizem padrões novos.
\appendix
\chapter{Código Produzido}
\section{Código do programa GAWK para o problema da Via Verde}
\section{Conteúdo fo ficheiro \emph{album.gawk}}
\begin{verbatim}
function lerValorTag(nome_tag, linha) {
    if(linha == "")
        linha = $0
    match(linha, "<" nome_tag "(\\s+.*)*>(.*)</" nome_tag "\\s*>", arr)
    return arr[2]
}

function lerAtributoTag(nome_tag, nome_atributo, linha){
   if(linha == ""){linha = $0}
   regex_atributos = "\\w+\\s*=\\s*(\"[^<\"]*\")|(\\'[^<\\']*\\')"
   temp = gensub(".*<" nome_tag "(\\s+" regex_atributos ")*\\s+" nome_atributo "\\s*=\\s*", "", 1, linha) 
   aspas = substr(temp,0,1)
   split(temp, temp2, aspas)
   ret = temp2[2]
   #se a tag com o atributo pretendido nao for encontrada, temp sera igual a linha 
   if(temp == linha){
      ret = ""
   } 
   return ret
}

#funcao simplificada que poe uma string num formato simplificado do url encode 
function url_encode(linha){
   ret = gensub("\\s", "+", "G", linha)
   ret = gensub("!", "%21", "G", ret)
   ret = gensub(":", "%3A", "G", ret)
   ret = gensub("'", "%27", "G", ret)
   ret = gensub(",", "%2C", "G", ret)
   return ret
}

BEGIN { RS = "</foto"
        output = "album.html"
        html_doctype = "<!DOCTYPE html>"
        html_css = "<link rel=\"stylesheet\" type=\"text/css\" href=\"museu.css\" />"
        html_head = "<head><meta charset=\"UTF-8\"><title> Album Fotográfico </title>" html_css "</head>"
        print html_doctype html_head "<html><body>\n<h1> Fotografias </h1><ul>" > output
      }

# como se pretende mostrar as pessoas e as fotos onde aparecem, as linhas 
# que não tiverem a tag "quem" nao sao processadas

/<quem(\s+.*)*/  { 
   ficheiro = lerAtributoTag("foto", "ficheiro")
   pessoas = lerValorTag("quem")
   data = lerAtributoTag("quando", "data") 
   if(data==""){
       data = lerValorTag("quando")
   }
   facto = lerValorTag("facto")
   local = lerValorTag("onde")

   # regista o local
   locais[local]

   # campos formatados para html
   local_formatado = (local == "")? "" : "<center><p> Local: " local "</p></center>" 
   data_formatada = (data=="")? "" : "<center><p>Data: " data "</p></center> "
   facto_formatado = (facto == "")? "" : "<center><h5>" facto "</h5></center>"
   pessoas_formatado = "<h3><LI><b>" pessoas "</b></LI></h3>" 
   imagem_formatada = "<img src=\"" ficheiro "\"/>"	
   entrada = pessoas_formatado"<center>"imagem_formatada "</center>"facto_formatado data_formatada \\
  					 local_formatado
   entradas[entrada] = data
}

END { 
   delete locais[""]
   asorti(entradas, copia_entradas,"@val_str_asc")
   for(i in copia_entradas){
       print copia_entradas[i] > output 
   }
   print "</ul>\n<h1> Locais Fotografados </h1>" > output 

   # ordena locais alfabeticamente
   asorti(locais)
   # gera mapa
   url = "https://maps.googleapis.com/maps/api/staticmap?key=AIzaSyAGDCGp6aTCV7_JQC3KNW2X3pmkOJxgMyw&size=640x480&markers="
   for(i in locais){
       url = url "|" url_encode(locais[i])  
   }
   print "<ul>" > output
   for(i in locais){
       print "<li> " locais[i] " </li>" > output 
   }
   print "</ul>  <center><img src=\"" url "\"/></center> <hr width=800> <center><p>  Feito por João Pereira(A75273), //
   João Martins(A68646), Manuel Freitas(A71646) </p><img src=\"logoUM.jpg\"  width=\"100\" height=\"50\"></center></body>\n</html>" > output 
}
\end{verbatim}
\section{Conteúdo de \emph{hendrix.xml}}
\begin{verbatim}
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE fotos SYSTEM "Users/sony/mp/fotos.dtd">
<fotos> 
  <foto ficheiro="hendrix/h1.jpg">
	 <quem> Mitch Mitchell, Jimi Hendrix, Noel Redding </quem> 
  </foto> 
  <foto ficheiro="hendrix/h2.jpeg">
  	 <onde> Royal Albert Hall, London </onde>
	 <quando data="1969-02-18"/> 
	 <quem> Jimi Hendrix </quem> 
  </foto> 
  <foto ficheiro="hendrix/h3.png">
  	 <onde> Royal Albert Hall, London </onde>
	 <quando data="1969-02-18"/> 
	 <quem> Jimi Hendrix, Noel Redding </quem> 
  </foto> 
  <foto ficheiro="hendrix/h4.jpg">
	 <quem> Jimi Hendrix, Johnny Winter </quem> 
  </foto> 
  <foto ficheiro="hendrix/h5.jpg">
	 <quem> John Paul Jones, Jimi Hendrix </quem> 
  </foto> 
  <foto ficheiro="hendrix/h6.jpg">
	 <quem> Jimi Hendrix, Mick Jagger </quem> 
  </foto> 
  <foto ficheiro="hendrix/h7.jpg">
	 <quem> Roger Daltrey, Pete Townshend, Jimi Hendrix, John Entwistle, Keith Moon </quem> 
  </foto> 
  <foto ficheiro="hendrix/h8.jpg">
  	 <onde> 34 Montagu Square, London </onde>
	 <quando>1967</quando> 
	 <quem> Jimi Hendrix </quem> 
	 <facto> Por Petra Niemeier</facto>
  </foto> 
  <foto ficheiro="hendrix/h9.jpg">
  	 <onde> Fillmore East, New York </onde>
	 <quando data="1969-12-31"/> 
	 <quem> Jimi Hendrix </quem> 
	 <facto> Os Band of Gypsys deram 2 concertos no ultimo dia de 1969, e dois no primeiro dia de 1970, em Fillmore East. </facto>
  </foto> 
  <foto ficheiro="hendrix/h10.jpg">
  	 <onde> Montagu Place, W.1. </onde>
	 <quem> Jimi Hendrix </quem> 
  </foto> 
  <foto ficheiro="hendrix/h11.jpg">
	 <quando data="1969-08-18"/> 
  	 <onde> Woodstock </onde>
	 <quem> Jimi Hendrix </quem> 
	 <facto> Aqui já no encore, no qual toca a Hey Joe a pedido do publico </facto>
  </foto> 
  <foto ficheiro="hendrix/h12.jpg">
	 <quando data="1969-08-18"/> 
  	 <onde> Woodstock </onde>
	 <quem> Jimi Hendrix, Billy Cox </quem> 
	 <facto> Devido a atrasos no alinhamento, tiveram de tocar no dia a seguir ao suposto final do festival </facto>
  </foto> 
  <foto ficheiro="hendrix/h13.jpg">
  	 <quando data="1970-07-04">
	 <onde> Byron, Georgia</onde>
	 <quem> Jimi Hendrix </quem>
	 <facto> Atlant Pop Festival </facto>
  </foto>
  <foto ficheiro="hendrix/h14.jpg">
  	 <quando data="1967-07-18">
	 <onde> Monterey, California </onde>
	 <quem> Jimi Hendrix </quem>
	 <facto> O concerto no Monterey Pop Festival foi o primeiro concerto do Hendrix na América, com uma "pequena" ajuda do amigo Paul McCartney. Tocaram a seguir aos The Who no dia de nomes como Scott McKenzie, Greatful Dead e The Mamas and Pappas </facto>
  </foto>
  <foto ficheiro="hendrix/h15.jpg">
  	 <quando data="1970-09-05">
	 <onde> Fehmarn, Germany </onde>
	 <quem> Jimi Hendrix </quem>
	 <facto> Hendrix no dia anterior ao do ultimo concerto que haveria de tocar </facto>
  </foto>
  <foto ficheiro="hendrix/h16.jpg">
  	 <quando data="1970-09-06">
	 <onde> Fehmarn, Germany </onde>
	 <quem> Jimi Hendrix </quem>
	 <facto> Ultimo concerto que haveria de tocar antes da sua trágica morte apenas 12 dias depois </facto>
  </foto>
  <foto ficheiro="hendrix/h17.jpg">
  	 <quando data="1970-08-30">
	 <onde> Isle of Wight, England </onde>
	 <quem> Jimi Hendrix </quem>
  </foto>
  <foto ficheiro="hendrix/h18.jpeg">
  	 <quando> 1961 </quando>
	 <onde> Montgomery, AL </onde>
	 <quem> Jimi Hendrix </quem>
	 <facto> No Elks Club. Quando esteve em Fort Benning, ele costumava ir até ao Elks Club em Montgomery aos fins de semana para tocar com nomes como B.B.King.</facto>
  </foto>
  <foto ficheiro="hendrix/h19.jpg">
  	 <quando> 1948 </quando>
	 <quem> Al, Lucille, Jimi e Leon Hendrix </quem>
	 <facto> Foto rara da familia toda reunida. Os pais, Al e Lucille, discutiam frequentemente e chegavam mesmo a lutar um com o outro sob a influencia do alcool. Leon estava sempre num vai e vem entre os Hendrix e familias de acolhimento. Lucille teve mais 3 filhos, que deram para adoção ou familias de acolhimento. Passado algum tempo Al conseguiu o divorcio e a custódia de Jimi e Leon. </facto>
  </foto>
  <foto ficheiro="hendrix/h20.jpg">
	 <quem> Al e Jimi Hendrix </quem>
	 <facto> Al viu o filho pela primeira vez apenas 3 anos após o seu nascimento. Jimi nasceu na altura da segunda guerra mundial, e Al estava em serviço e não o deixaram sair para estar presente no nascimento. </facto>
  </foto>
  <foto ficheiro="hendrix/h21.jpg">
  	 <quando> 1942 </quando>
	 <quem> Lucille Jetter Hendrix, Jimi Hendrix </quem>
	 <facto> Tirada no ano do seu nascimento. </facto>
  </foto>
  \end{verbatim}
%\begin{lstlisting}[caption={Exemplo de uma Listagem}, label={lstExe1}]
%llll sanjdb c kjnjcnjnjj mmmmmmmmmmmmm hhhhhhhhhhhhhhhhhhhhhhhh jjjjjjjjjjjjjjjjjjjjjjjjjjjj kkkkkkkkkkkkkkkkkk
%      ou então aparecer aqui neste sítio um pouco de matematica $\$$
%      como alternativa ao anterior.
%      e aqui mais um teste $\varepsilon$
%\end{lstlisting}

%É ainda possível importar diretamente o ficheiro:
%\lstinputlisting{plfiltrobase.l} %input de um ficheiro


\bibliographystyle{alpha}
\bibliography{relprojLayout}
\end{document} 
