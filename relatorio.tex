\documentclass{report}
\usepackage[portuges]{babel}
%\usepackage[utf8]{inputenc}
\usepackage[latin1]{inputenc}

\usepackage{url}
\usepackage{enumerate}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{nameref}

%\usepackage{alltt}
%\usepackage{fancyvrb}
\usepackage{listings}
%LISTING - GENERAL
\lstset{
    basicstyle=\small,
    numbers=left,
    numberstyle=\tiny,
    numbersep=5pt,
    breaklines=true,
    frame=tB,
    mathescape=true,
    escapeinside={(*@}{@*)},
}
%
%\lstset{ %
%   language=Java,                          % choose the language of the code
%   basicstyle=\ttfamily\footnotesize,      % the size of the fonts that are used for the code
%   keywordstyle=\bfseries,                 % set the keyword style
%   %numbers=left,                          % where to put the line-numbers
%   numberstyle=\scriptsize,                % the size of the fonts that are used for the line-numbers
%   stepnumber=2,                           % the step between two line-numbers. If it's 1 each line
%                                           % will be numbered
%   numbersep=5pt,                          % how far the line-numbers are from the code
%   backgroundcolor=\color{white},          % choose the background color. You must add \usepackage{color}
%   showspaces=false,                       % show spaces adding particular underscores
%   showstringspaces=false,                 % underline spaces within strings
%   showtabs=false,                         % show tabs within strings adding particular underscores
%   frame=none,                             % adds a frame around the code
%   %abovecaptionskip=-.8em,
%   %belowcaptionskip=.7em,
%   tabsize=2,                              % sets default tabsize to 2 spaces
%   captionpos=b,                           % sets the caption-position to bottom
%   breaklines=true,                        % sets automatic line breaking
%   breakatwhitespace=false,                % sets if automatic breaks should only happen at whitespace
%   title=\lstname,                         % show the filename of files included with \lstinputlisting;
%                                           % also try caption instead of title
%   escapeinside={\%*}{*)},                 % if you want to add a comment within your code
%   morekeywords={*,...}                    % if you want to add more keywords to the set
%}

\usepackage{xspace}

\parindent=0pt
\parskip=4pt

\setlength{\oddsidemargin}{-1cm}
\setlength{\textwidth}{18cm}
\setlength{\headsep}{-1cm}
\setlength{\textheight}{23cm}

\def\pe{\emph{Publicação Eletrónica}\xspace}

\def\titulo#1{\section{#1}}
\def\super#1{{\em Supervisor: #1}\\ }
\def\area#1{{\em \'{A}rea: #1}\\[0.2cm]}
\def\resumo{\underline{Resumo}:\\ }


%%%%\input{LPgeneralDefintions}

\title{Processamento de Linguagens \\ MIEI (3º ano) \\~\\ \large Trabalho Prático nº 1 - Parte A (GAWK)\\ Relatório de Desenvolvimento \\~\\ Ano lectivo 16/17}
\author{João Pereira\\(A75273) \and João Martins\\(A68646) \and Manuel Freitas\\(A71646) }
\date{\today}

\begin{document}

\maketitle

\begin{abstract}
Os processadores de linguagens são, por natureza, ferramentas muito poderosas. Para se demonstrar a sua utilidade, desenvolveu-se dois processadores de texto para resolver dois problemas diferentes. O primeiro teve como objetivo facilitar a criação de um album fotográfico a partir de um ficheiro de metadados anotado no formato XML. O segundo foi desenvolvido para processar extractos mensais da Via Verde, no formato XML, e fornecer ao seu utilizador dados úteis acerca dos mesmos. Neste relatório, discute-se o desenho e implementação em GAWK desses dois processadores de linguagens.
\end{abstract}

\tableofcontents

\chapter{Introdução} \label{intro}
Ao se lidar com ficheiros de texto, por vezes surge a necessidade de se fazer alterações sempre que ocorre um determinado padrão, ou extrair informação a partir de certas linhas. Para tal, poder-se-ia escrever um programa numa linguagem tal como o C ou em Java, contudo isso implicaria um elevado tempo de desenvolvimento e, provavelmente, muitas linhas de código. Uma alternativa menos dispendiosa em termos de volume de código e de tempo consiste na criação automática de \textit{processadores de linguagens regulares} a partir de \textit{expressões regulares}. Em particular, através do sistema de produção GAWK consegue-se desenvolver programas sucintos, constituídos por uma sequência de pares padrão-acção que definem o processamento a realizar quando são encontrados determinados padrões no(s) ficheiro(s) de \textit{input}.

Neste relatório, expõe-se todo o processo e decisões de desenvolvimento de dois processadores de texto escritos em GAWK: um que lê ficheiros XML com meta-informação de fotografias e produz um album HTML com várias informações acerca das mesmas e outro que lê extractos mensais da Via Verde no formato XML e a partir deles extrai informações variadas.

\section*{Estrutura do Relatório}
O relatório encontra-se dividido em 4 capítulos:
\begin{enumerate}
    \item \nameref{intro} (o capítulo atual);
    \item \nameref{album_fotos};
    \item \nameref{via_verde};
    \item \nameref{concl}.
\end{enumerate}

No capítulo~\ref{album_fotos}, explica-se o processo e as decisões de desenvolvimento de um processador de texto com o GAWK que lê um ou mais ficheiros XML com meta-informação de albums fotográficos e produz um ficheiro HTML com o corpo do(s) album(s) especificados, incluindo a lista de locais fotogrados e a sua representação num mapa.

No capítulo~\ref{via_verde}, descreve-se a metodologia e as decisões de desenvolvimento de um processador de texto com o GAWK, capaz de ler vários extractos da Via Verde em formato XML e extrair informações sobre gastos, locais de `saída' e número de `entradas' em cada dia do mês.

No que diz respeito à sua estrutura, os capítulos \ref{album_fotos} e \ref{via_verde} são idênticos, tendo ambos:
\begin{enumerate}
  \item uma secção de análise e especificação na qual se descreve informalmente o problema e se apresenta a especificação de requisitos e o formato dos ficheiros de \textit{input};
  \item uma secção em que se explica a forma de se utilização do processador de texto em questão e se apresenta exemplos de utilização;
  \item uma secção na qual se justifica as várias decisões de desenvolvimento e implementação da solução, apresenta-se possíveis decisões alternativas e mostra-se alguns dos testes realizados e os resultados obtidos.
\end{enumerate}

No capítulo~\ref{concl}, termina-se o relatório com uma síntese do trabalho desenvolvido e com as conclusões do mesmo.

\chapter{Album Fotográfico em HTML} \label{album_fotos}

\section{Análise e Especificação} \label{ae_af}

\subsection{Descrição Informal do Problema}
Pretende-se que a partir de um ficheiro de metadados em XML, com informação sobre várias fotos, se construa um album fotográfico.
Para além disso, pretende-se que sejam listados todos os locais fotografados, sem repetições. Para tal, espera-se que o ficheiro de metadados
siga uma determinada estrutura que será descrita posteriormente. 
\subsection{Especificação do Requisitos}
Com base no que foi pedido, o grupo definiu que o programa deve cumprir os seguintes requisitos mínimos:
\begin{itemize}
    \item apresentar na página HTML as fotografias referenciadas no ficheiro de metadados, juntamente com as pessoas que nela aparecem; 
    \item apresentar na página HTML uma lista sem repetições do locais fotografados.
\end{itemize}
Para além disso, o grupo entendeu que o trabalho deveria também satisfazer os seguintes requisitos por forma a que o resultado final fosse interessante e útil:
\begin{itemize}  
    \item ordenar as fotos cuja data é conhecida por ordem cronológica. As fotos cuja data é desconhecida deverão ser apresentadas incialmente; 
    \item ordenar os locais fotografados por ordem alfabética;
    \item apresentar, para além das fotos e das pessoas que nelas aparecem, o local onde foi tirada a foto (quando este dado for fornecido) e a data em que a mesma foi tirada (quando houver essa informação). Se a fotografia tiver alguma descrição ou facto associado a ela, também se pretende que tal seja apresentado;
    \item dado que o problema surge no âmbito do Museu da Pessoa, pretende-se 
    que a aparência da página HTML se assemelhe à aparência da página web do Museu da Pessoa;
    \item pretende-se apresentar num único mapa os vários locais fotogrados no album.
\end{itemize}

\newpage
\subsection{Formato do Ficheiro de Metadados}
O ficheiro de metadados consistirá num conjunto de elementos \texttt{foto}. Cada um desses elementos deverá ter um atributo \texttt{ficheiro} que especifica o caminho para a fotografia a que diz respeito.

Entre as \emph{tags} de abertura e fecho estarão elementos XML que dão informação à fotografia. Esses elementos podem ter um dos seguintes nomes:
\begin{itemize}
    \item \textbf{onde}: indica o local onde a fotografia foi tirada
    \item \textbf{quando}: indica quando é que a fotografia foi tirada.
    Esta informação pode estar representada sob a forma do atributo \texttt{data} deste elemento ou pode ser expressa pelo valor entre a \emph{tag} 
    de abertura e fecho do elemento, como se pode ver nos exemplos abaixo.
    \begin{verbatim}
    # exemplo 1: data armazenada no atributo "data"
    <quando data="1961-01-15"/> 

    # exemplo 2: data armazenada entre as tags de abertura e fecho
    <quando>1977-12-19</quando> 
    \end{verbatim}
    A data deve seguir o formato \emph{ano-mês-dia}, sendo que os formatos \emph{ano-mês} e \emph{ano} também são válidos. Os campos do mês e do dia devem ter obrigatoriamente dois dígitos, mesmo que o primeiro seja o 0. O utilizador do programa pode escolher qualquer símbolo que entenda, desde que o use em todo o ficheiro de metadados.
    \item \textbf{quem}: indica quem são as pessoas presentes na fotografia;
    \item \textbf{facto}: curiosidade acerca da fotografia referida.
\end{itemize}
Todos os elementos referidos acima são opcionais, dado que o programa terá uma execução correta, i.e. não ocorrerão casos de excepção, caso algum desses elementos seja omitido. 
No entanto, as fotos que não contenham o elemento \textbf{quem} não serão apresentadas.
A sequência de elementos \textbf{foto} pode estar opcionalmente inserida num elemento \textbf{fotos}.

\section{Utilização}
O programa GAWK desenvolvido para resolver o problema em causa, designado por \texttt{album.gawk}, é invocado através do comando:
\begin{verbatim}
gawk -f album.gawk FILE ...
\end{verbatim}
, onde \texttt{FILE} assinala o lugar onde se deve introduzir o nome ou caminho absoluto do primeiro ficheiro de metadados a ser processado. Se se pretender construir o album a partir de mais ficheiros XML, pode-se fazê-lo listando-os à direita de \texttt{FILE}, separados por espaços.

\subsection{Exemplos de Utilização}
O comando:
\begin{verbatim}
gawk -f album.gawk hendrix.xml
\end{verbatim}
, invoca o programa \texttt{album.gawk} com o ficheiro \texttt{hendrix.xml} (anexo~\ref{hendrix_in}) e produz o ficheiro \texttt{album.html}, que contém o album obtido a partir dos metadados do ficheiro de \textit{input}. No anexo~\ref{hendrix_out} pode-se observar parte do album produzido pelo comando apresentado.

\newpage
O comando:
\begin{verbatim}
gawk -f album.gawk legenda.xml hendrix.xml
\end{verbatim}
, invoca o programa \texttt{album.gawk} com os ficheiros \texttt{legenda.xml} e \texttt{hendrix.xml} e produz o ficheiro \texttt{album.html}, que consiste num album fotográfico produzido a partir dos dois ficheiros de \textit{input}.

\section{Concepção e Implementação da Resolução}
% Para se resolver o problema em causa, desenvolveu-se um programa em GAWK cujo nome é \texttt{album.gawk}. Este programa é invocado da seguinte forma, se só se pretender construir o album a partir de um ficheiro \emph{.xml}:
%\begin{verbatim}
%gawk -f album.gawk FILE
%\end{verbatim}

%Se se pretender construir o album a partir de vários ficheiros \emph{.xml}, pode-se fazê-lo invocando o programa da seguinte forma.
%\begin{verbatim}
%gawk -f album.gawk FILE ...
%\end{verbatim}

\subsection{Codificação}
Nesta secção, será discutido o código produzido para resolver o problema. O código pode ser consultado na íntegra no apêndice~\ref{cod_fich_af}.
Começa-se por analisar as funções desenvolvidas para processar os elementos XML. Inicialmente, foram construídas duas funções:
\begin{itemize}
    \item \texttt{ler\_valor\_tag(nome\_tag, linha)}. Esta função recebe como \textit{input}, por ordem, o nome do elemento a ser processado (por exemplo, \textbf{quando}) e a linha a ser processada (por exemplo, \$0) e devolve o texto entre as tags de abertura e de fecho do primeiro elemento encontrado ou ``'' se não existir o elemento pretendido. O resultado é obtido através da função pré-definida \texttt{match} que, juntamente com a expressão regular \begin{verbatim}"<" nome_tag "(\\s+.*)*>(.*)</" nome_tag "\\s*>" \end{verbatim} permite que se extraia a informação pretendida;
    \item \texttt{ler\_atributo\_tag(nome\_tag, nome\_atributo, linha)}. Esta função recebe como \textit{input}, por ordem, o nome do elemento a ser processado (por exemplo, \textbf{quando}), o atributo a ser lido (por exemplo, \textbf{data}) e a linha a ser processada (por exemplo, \$0) e devolve o valor do atributo no elemento especificado por \texttt{nome\_tag} ou ``'' se o atributo não for encontrado. \texttt{ler\_atributo\_tag} recorre à função \texttt{gensub} para eliminar a parte inicial da linha que não tem a informação pretendida. Depois lê o tipo de aspas usadas para delimitar o valor do atributo e por fim utiliza a função \texttt{split} para separar o valor do atributo das aspas que o delimitam.
\end{itemize}
Posteriormente, foi também definida a função \texttt{url\_encode} que, dada uma linha, devolve essa linha onde os caracteres reservados do formato URL são substituídos pelas sequências respetivas. Esta função não faz uma tradução completa, apenas traduz os caracteres mais usados. O grupo tomou esta decisão porque o ganho obtido por fazer uma função completa seria mínimo face à versão atual e consistiria apenas em fazer ``mais do mesmo''. Para fazer as substituições dos símbolos reservados, a função \texttt{url\_encode} recorre a invocações da função \texttt{gensub}.

Estando explicadas as funções definidas pelo grupo, passa-se à descrição da implementação do programa. No bloco BEGIN, definiu-se o separador de registos (RS) como sendo o padrão ``</foto''. Desta forma, garante-se que sempre que é encontrada informação de uma foto se pode aceder a todos os dados referentes à mesma (por exemplo, o local e a data da fotografia), dentro do mesmo registo. Ainda antes de se ler o conteúdo do 1º ficheiro de \textit{input}, escreve-se o cabeçalho HTML no ficheiro de \textit{output}. Esse cabeçalho inclui, entre outras coisas, a definição do tema da página. Dado que este problema surgiu no âmbito do Museu da Pessoa, o grupo considerou que fazia sentido replicar o tema do mesmo e, por conseguinte, usou o ficheiro \texttt{.css} utilizado no portal \textit{web} do Museu da Pessoa.

Seguidamente, para todas os registos que apresentem um elemento \textbf{quem}, procura-se a informação relativa ao ficheiro a mostrar, a quem aparece na foto, onde foi tirada a foto e algum facto associado à mesma. Esta procura é feita recorrendo às funções referidas acima para obter informação dos elementos XML. Os locais onde as fotografias são tiradas são armazenados num \textit{array} associativo para mais tarde serem listados. Usando o local como chave, garante-se que apenas uma cópia de cada local é guardada, não havendo repetições de locais. De seguida, os dados da imagem são formatados para estarem de acordo com o formato HTML e são combinados numa linha para ser inserida na página de \textit{output}. Essa linha é guardada num \textit{array} associativo, onde a chave é a própria linha e o valor é a data da fotografia a que a linha diz respeito. Desta forma, é possível posteriormente ordenar cronologicamente as fotografias.

No final da leitura do ficheiro, as entradas são ordenadas por data através da função \texttt{asorti}, que ordena os indíces segundo o critério passado como argumento, neste caso, por ordem crescente dos valores (datas). De seguida, as entradas são escritas no ficheiro HTML. A seguir, percorre-se o \textit{array} com os locais visitados e ordena-se esse \textit{array} alfabeticamente.

Para além disso, gera-se um URL a partir dos nomes dos locais, processados pela função \texttt{url\_encode}. Este URL é especificado pela API do \emph{Google Maps} e permite que se gere uma imagem de um mapa com os locais assinalados. A forma para gerar o URL é descrita em \url{https://developers.google.com/maps/documentation/static-maps/intro} e consiste em concatenar um URL base com o nome dos locais, convertidos para a codificação URL, separados por ``|''. De seguida, imprime-se para o ficheiro os locais ordenados alfabeticamente e sem repetições e a linha que faz com que apareça a imagem do mapa, seguida do rodapé da página.

\subsection{Testes}
Para se testar o programa desenvolvido, fez-se uso do ficheiro \emph{legenda.xml} fornecido pela equipa docente. No entanto, este ficheiro teve de sofrer algumas alterações para corrigir erros ortográficos e para estar de acordo com as convenções adotadas, nomeadamente no que toca ao formato das datas. Para além disso, o grupo construiu um ficheiro de metadados sobre a vida de \emph{Jimi Hendrix} para testar este programa. O ficheiro construido tem o nome de \texttt{hendrix.xml} e pode ser consultado no apêndice~\ref{hendrix_in}. Em ambos os testes, o programa gerou corretamente a página e os resultados foram os esperados (no anexo~\ref{hendrix_out} pode-se observar um extracto dos resultados obtidos para o ficheiro \texttt{hendrix.xml}). Também se testou passar os dois ficheiros em simultâneo para gerar um album a partir de ambos. Também neste caso os resultados obtidos foram os esperados: a página gerada apresenta as imagens e os seus dados corretamente, com uma ordenação cronológica das fotografias correta. Durante estes testes, o grupo deparou-se com uma limitação da API do \emph{Google Maps} que apenas permite, no máximo, que se mostrem 15 locais na mesma imagem. No entanto, esta limitação técnica em nada diminui o interesse dos resultados obtidos.

\chapter{Processador de Transacções da Via Verde} \label{via_verde}
\section{Análise e Especificação} \label{ae_vv}
\subsection{Descrição Informal do Problema}
Dado um extracto mensal da Via Verde, anotado em \texttt{XML}, pretende-se extrair e apresentar informação sobre os gastos totais, gastos totais em parques, número de `entradas' em cada dia do mês e locais de `saída'.

\subsection{Especificação dos Requisitos} \label{er_vv}
Partindo daquilo que foi solicitado no enunciado, tem-se que os requisitos base consistem no desenvolvimento de um processador de texto com o GAWK, capaz de ler um extracto mensal da Via Verde e:

\begin{enumerate}[a)]
  \item calcular o número de `entradas' em cada dia do mês;
  \item escrever a lista dos locais de `saída';
  \item calcular o total gasto no mês;
  \item calcular o total gasto no mês em `parques'.
\end{enumerate}

Além dos requisitos enumerados, o grupo considerou útil que o processador de texto desenvolvido fosse capaz de ler vários extractos da Via Verde numa única invocação e, para cada extracto lido:
\begin{itemize}
  \item ordenar cronologicamente os dias do mês em que ocorreram as `entradas';
  \item ordenar alfabeticamente a lista de locais de `saída';
  \item imprimir o número do extracto, o mês de emissão e o nome, identificador e NIF do cliente;
  \item apresentar, para cada viatura, a matrícula, o identificador, a referência de pagamento, o total gasto e o total gasto em `parques' no mês do extracto;
\end{itemize}
Uma vez processados todos os extractos passados numa invocação, o processador deverá também apresentar o total global gasto e o total global gasto em `parques'.

\subsection{Formato do \textit{input}} \label{form_inp_vv}
Cada extracto consiste num ficheiro XML que, após a eventual declaração XML, tem a \textit{tag} \texttt{EXTRACTO} com o atributo \texttt{id}, indicando o número identificador do extracto. No seguimento da abertura da \textit{tag} \texttt{EXTRACTO}, vêm o mês de emissão e os dados do cliente, nomeadamente: identificador, NIF, nome, morada, localidade e código postal. Exemplificando com o extracto disponibilizado pela equipa docente (\texttt{viaverde.xml}), tem-se:

\begin{verbatim}
<?xml version="1.0" encoding="UTF-8"?>
<EXTRACTO id="011114056/08/2015">
  <MES_EMISSAO>Ago-2015</MES_EMISSAO>
    <CLIENTE id="514714936">
      <NIF>987653210</NIF>
      <NOME>PEDRO MANUEL RANGEL SANTOS HENRIQUES</NOME>
      <MORADA>RUA XXX</MORADA>
      <LOCALIDADE>BRAGA</LOCALIDADE>
      <CODIGO_POSTAL>4715-012 BRAGA</CODIGO_POSTAL>
    </CLIENTE>
\end{verbatim}

Depois da secção inicial descrita, segue-se uma \textit{tag} com o nome \texttt{IDENTIFICADOR} que tem o atributo \texttt{id}, assinalando o início da lista de transações do veículo com o \texttt{id} especificado. Antes da listagem das transacções da viatura em questão, surgem também as \textit{tags} \texttt{MATRICULA} e \texttt{REF\_PAGAMENTO}, que correspondem, respetivamente, à matrícula do veículo e à referência de pagamento. Sucede-se então uma listagem das transacções do veículo em questão, concluída com o total gasto, imediatamente antes do fecho da \textit{tag} \texttt{IDENTIFICADOR}. Para o caso concreto do ficheiro \texttt{viaverde.xml}, tem-se:

\begin{verbatim}
<IDENTIFICADOR id="28876820811">
  <MATRICULA>00-LJ-11</MATRICULA>
  <REF_PAGAMENTO>1234567</REF_PAGAMENTO>
  <TRANSACCAO>
    <DATA_ENTRADA>26-07-2015</DATA_ENTRADA>
    <HORA_ENTRADA>11:33</HORA_ENTRADA>
    <ENTRADA>Povoa N-S</ENTRADA>
    <DATA_SAIDA>26-07-2015</DATA_SAIDA>
    <HORA_SAIDA>11:42</HORA_SAIDA>
    <SAIDA>Angeiras N-S</SAIDA>
    <IMPORTANCIA>2,00</IMPORTANCIA>
    <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
    <TAXA_IVA>23</TAXA_IVA>
    <OPERADOR>I. de Portugal (N1)</OPERADOR>
    <TIPO>Portagens</TIPO>
    <DATA_DEBITO>05-08-2015</DATA_DEBITO>
    <CARTAO>6749036</CARTAO>
  </TRANSACCAO>
  (...) <!-- Outras transacções -->
  <TOTAL>77,40</TOTAL>
</IDENTIFICADOR>
\end{verbatim}

Após a listagem das transacções associadas a cada uma das viaturas do cliente (de acordo com o formato acima descrito), surge o total gasto em todas as transacções, a porção desse total que corresponde ao IVA e, por fim, o fecho da \textit{EXTRACTO}, conforme exemplificado no seguinte excerto:

\begin{verbatim}
<TOTAL>77,40</TOTAL>
  <TOTAL_IVA>14,49</TOTAL_IVA>
</EXTRACTO>
\end{verbatim}

\newpage
\section{Utilização}
A invocação do processador de extractos mensais da Via Verde, designado \texttt{processa-vv.gawk}, é realizada através do comando:
\begin{verbatim}
gawk -N -f processa-vv.gawk FILE ...
\end{verbatim}
, onde \texttt{FILE} marca o lugar onde se deve introduzir o nome ou caminho absoluto do primeiro extracto a ser processado. Poderão também ser passados mais extractos, bastando para isso listá-los, separados por espaços, à direita de \texttt{FILE}.

\textbf{Nota:} A \textit{flag} \texttt{-N} é utilizada para que o GAWK considere a vírgula (`,') como separador decimal, em vez do ponto (`.'). Isto porque o GAWK por omissão usa o ponto como separador decimal e nos extractos da Via Verde é utilizada a vírgula para separar casas decimais.

Quando a execução do \textit{script} \texttt{processa-vv.gawk} é bem sucedida, o resultado é apresentado no \texttt{stdout} (em invocações com vários ficheiros de texto, recomenda-se o redireccionamento do \textit{output} para um comando que permita a paginação do mesmo, p. ex: o comando \texttt{less}).

\subsection{Exemplos de Utilização}
O comando:
\begin{verbatim}
gawk -N -f processa-vv.gawk viaverde.xml
\end{verbatim}
, invoca o processador de extractos da Via Verde com o ficheiro \texttt{viaverde.xml} (disponibilizado pela equipa docente) e imprime no \texttt{stdout} os resultados apresentados que se podem observar no anexo~\ref{vv_out}.

O comando:
\begin{verbatim}
gawk -N -f processa-vv.gawk viaverde-mar.xml viaverde-abr.xml
\end{verbatim}
, invoca o processador de extractos da Via Verde com os ficheiros \texttt{viaverde-mar.xml} e \texttt{viaverde-abr.xml} e apresenta no \texttt{stdout} os resultados expostos no anexo~\ref{vv_mar_abr_out}.

\section{Concepção e Implementação da Resolução}

% Para se resolver o problema em causa, criou-se um programa em \texttt{GAWK} designado por \emph{processa-vv.gawk}, que é invocado
% a partir de uma \textit{shell} \texttt{UNIX} da seguinte forma:
% \begin{verbatim}
% gawk -N -f processa-vv.gawk FILE ...
% \end{verbatim}

% \textbf{Nota:} Como os valores fraccionários dos extractos da Via Verde usam a vírgula (`,') como separador decimal, é necessário invocar o \texttt{GAWK} com a \textit{flag} \texttt{-N}, de forma a que este considere a vírgula (em vez do ponto) como separador decimal.

% Quando a execução do \textit{script} \texttt{processa-vv.gawk} é bem sucedida, o resultado é apresentado no \texttt{stdout} (caso se invoque o programa com vários ficheiros de texto, aconselha-se o redireccionamento do \textit{output} para um comando que permita a paginação do mesmo, p. ex: o comando \texttt{less}).

\subsection{Codificação} \label{cod_af}
O código do \textit{script} \texttt{processa-vv.gawk} pode ser consultado na íntegra no apêndice~\ref{cod_fich_vv} deste relatório. Nesta secção, analisa-se as decisões e aspetos principais da codificação do programa, tais como o separador de registos (\texttt{RS}) e separador de campos (\texttt{FS}) escolhidos, as funções e os pares padrão-acção definidos e os blocos de inicialização e de término do programa.

Para separador de registos (RS) optou-se por utilizar a expressão regular ``\textless TRANSACCAO'', uma vez que, dada a estrutura dos extractos (\ref{form_inp_vv}), o separador referido permite ``isolar'' em cada registo os dados de cada transacção. Contudo, é importante mencionar que o 1º registo não vai conter os dados de uma transacção, mas sim as várias \textit{tags} inciais que caracterizam o extracto, o cliente e a primeira viatura a surgir no ficheiro. Estas \textit{tags} têm informação útil, que é extraída através dos pares padrão-acção que serão descritos abaixo.

Para separador de campos escolheu-se o valor definido por omissão, i.e.: qualquer sequência de \texttt{TABs}, espaços e/ou \textit{newlines}. Poder-se-ia ter utilizado qualquer outro separador de campos, uma vez que na implementação da solução não se necessitou de aceder a campos em específico, contudo não se ganharia nada em atribuir outro valor ao FS.

\newpage
No bloco \texttt{BEGIN}:
\begin{enumerate}
  \item definiu-se o separador de campos acima referido;
  \item incializou-se as variáveis \texttt{SEP} e \texttt{SEP\_FICH}, utilizadas, respetivamente, para separar os resultados de um dado ficheiro e os resultados de ficheiros distintos;
  \item guardou-se alguns formatos a utilizar na função \texttt{printf}, para tornar as respetivas invocações mais legíveis;
  \item inicializou-se a 0 o total global de gastos e o total global de gastos em parques, i.e.: totais relativos ao conjunto de todos os extractos passados numa invocação do programa.
\end{enumerate}

Além do bloco \texttt{BEGIN}, usou-se o bloco \texttt{BEGINFILE} para, imediatamente antes de se começar a ler um novo extracto, se inicializar a 0 o total gasto e o total gasto em parques no mês a que esse extracto diz respeito.

Após o \texttt{BEGINFILE}, surge o primeiro par padrão-acção, que indica que quando um registo contém o padrão \\``\textless EXTRACTO'' (abertura da \textit{tag} \texttt{EXTRACTO}), se deve ler o \textit{id} do extracto, o mês de emissão e o \textit{id}, nif e nome do cliente e por fim imprimi-los. A leitura dos valores das \textit{tags} e dos atributos é efetuada através das funções \texttt{ler\_valor\_tag} e \texttt{ler\_atributo\_tag}, que já foram descritas na secção~\ref{cod_af}.

O próximo par padrão-acção define o processamento a realizar sempre que se encontra a expressão regular \\``\textless\textbackslash TRANSACCAO''. Dado que o separador de registos é a expressão regular ``\textless TRANSACCAO'', cada registo que englobe o fecho da \textit{tag} \texttt{TRANSACCAO} também inclui os dados da transacção. Nestes casos, a acção a realizar resume-se a partir o registo nos caractéres `\textless' e `\textgreater', recorrendo à função pré-definida \texttt{split}, e percorrer o \textit{array} resultante da partição, para se consultar os dados da transação até se encontrar o elemento ``\textless TRANSACCAO''. Nos dados da transacção, procura-se:
\begin{itemize}
  \item \textbf{A data de entrada}: se se encontrar uma data de entrada e estar for diferente de ``null'', incrementa-se a respetiva contagem armazenada num \textit{array} associativo de datas de entrada;
  \item \textbf{O local de saída}: quando o local de saída está especificado, incrementa-se a contagem do mesmo num \textit{array} associativo de saídas;
  \item \textbf{A importância}: o valor da importância é guardado numa variável;
  \item \textbf{O valor de desconto}: o grupo assumiu que a importância é o valor pago sem desconto, pelo que quando se encontra o valor de desconto, este é subtraido à importância para se obter o valor efetivamente pago;
  \item \textbf{O tipo}: quando a transacção é referente a `parques', ativa-se uma \textit{flag} designada por \texttt{parque} que, depois de percorrido o \textit{array} com os dados da transacção, determina se o total gasto em parques deve ou não ser atualizado.
\end{itemize}

Uma vez percorrido o \textit{array} produzido pela partição acima referida, soma-se o valor da transacção à variável \texttt{total\_viatura} e, caso a transacção seja relativa a parques, também se adiciona o valor da mesma a \texttt{total\_viatura\_parques}.

O par padrão-acção seguinte tem o padrão ``\textless \textbackslash IDENTIFICADOR'' e determina que ao se encontrar o fecho da \textit{tag} \texttt{IDENTIFICADOR} se deve imprimir \texttt{total\_viatura} e \texttt{total\_gasto\_viatura}, somar o primeiro ao total gasto no mês do extracto e adicionar o segundo ao total gasto em parques nesse mesmo mês.

Por fim, surge um último par padrão-acção que determina o processamento realizado quando se encontra uma nova viatura, i.e.: ao se encontrar a expressão ``\textless IDENTIFICADOR''. Nestes casos, pretende-se ler o \textit{id}, matrícula e a referência de pagamento da viatura, imprimi-los e colocar a 0 as variáveis \texttt{total\_viatura} e {total\_viatura\_parques}.

Restam os blocos \texttt{ENDFILE} e \texttt{END}.

\newpage
Chegando ao final de um ficheiro:
\begin{itemize}
  \item imprime-se o número de `entradas' em cada dia do mês, ordenadas cronologicamente;
  \item apresenta-se a lista de locais de `saída', ordenadas alfabeticamente;
  \item indica-se o total gasto e o total gasto em parques no mês a que o extracto acabado de ler diz respeito;
  \item atualiza-se o total global gasto e o total global gasto em parques, somando-lhes os respetivos totais do ficheiro.
\end{itemize}

Chegando ao final do último ficheiro, imprime-se o total global e o total global gasto em `parques'.

\textbf{Nota:} a ordenação das datas e dos locais de saída é efetuada através da função \texttt{asorti}. No caso dos locais de saída, basta utilizar a função por omissão de comparação de \textit{strings}. No caso das datas dos extractos da Via Verde, não se pode utilizar a função de comparação por omissão por estas estarem no formato \texttt{dd-mm-yyyy}, Assim sendo, o grupo definiu e utilizou a função \texttt{cmp\_datas}, que dadas duas datas no formato \texttt{dd-mm-yyyy}, parte cada uma delas pelo caractere `-' e compara as partições obtidas, da direita para a esquerda (i.e.: do ano para o dia).

\subsection{Testes}

Para se testar a solução desenvolvida, recorreu-se ao ficheiro \texttt{viaverde.xml}, disponibilizado pela equipa docente e aos ficheiros \texttt{viaverde-jan.xml}, \texttt{viaverde-mar.xml}, \texttt{viaverde-abr.xml}, \texttt{viaverde-mai.xml}, \texttt{viaverde-jun.xml}, \texttt{viaverde-jul.xml}, \texttt{viaverde-ago.xml} e \texttt{viaverde-set.xml}, fornecidos pelo pai do João Martins.

No caso do extracto \texttt{viaverde.xml}, efetuou-se a invocação \texttt{gawk -N -f processa-vv.gawk viaverde.xml}. O \textit{output} obtido, que pode ser observado no anexo~\ref{vv_out}, coincide com o que era esperado e, visto que o ficheiro \texttt{viaverde.xml} é relativamente curto, por observação do mesmo consegue-se confirmar a correcção dos resultados produzidos.

O facto de no extracto \texttt{viaverde.xml} só ocorrem as transacções de uma viatura leva a que o total gasto e o total gasto em `parques' no mês sejam iguais aos respetivos totais do mês para essa viatura. Além disso, os totais globais também coincidem com os totais do mês devido à invocação ter sido feita com um único extracto.

Com a finalidade de se testar o comportamento do programa quando invocado com vários extractos de uma vez, em que cada um apresenta transacções de dois veículos diferentes, utilizou-se os restantes ficheiros acima referidos, realizando várias invocações com números e combinações diferentes dos mesmos. Numa dessas invocações, passou-se os extractos \texttt{viaverde-mar.xml} e \texttt{viaverde-abr.xml} para o processador de transacções, através do comando \texttt{gawk -N -f processa-vv.gawk viaverde-mar.xml viaverde-abr.xml}. O \textit{output} obtido, disponível no anexo~\ref{vv_mar_abr_out}, mostra que neste caso existem duas viaturas, pelo que em cada extracto são mostrados o total gasto e o total gasto em `parques' para cada uma dessas viaturas. Também se observa que os resultados do mês continuam a aparecer no final dos resultados de cada extracto e a incluir o número de `entradas' em cada dia do mês, a lista das `saídas', o total gasto e o total gasto em parques no mês. Adicionalmente, constata-se que em cada mês o total gasto e o total gasto em `parques' correspondem à soma dos respetivos totais das viaturas nesse mês. Por fim, nas últimas duas linhas do \textit{output}, pode-se consultar os resultados globais que, de cima para baixo, correspondem à soma do total gasto e à soma do total gasto em `parques' nos meses dos extractos processados na invocação.

Com os testes realizados, o grupo obteve os resultados que eram esperados e que satisfazem os requisitos apresentados na secção~\ref{er_vv}.

\chapter{Conclusão} \label{concl}
Neste trabalho, apercebemo-nos da grande versatilidade e utilidade dos processadores de linguagens regulares. Com pouco código, fomos capazes de construir programas úteis e interessantes. Entendemos que realizamos um bom trabalho dado que fizemos tudo a que nos propusemos nos dois enunciados, ultrapassando largamente o que era pedido nos requisitos mínimos. Verificamos que o GAWK nem sempre é a ferramenta mais adequada para analisar ficheiros XML uma vez que leva à criação de expressões longas e muitas vezes difíceis de ler. Também é dificíl analisar por
vezes a hierarquia de elementos do documento, no entanto, com a escolha correta de valores para o \texttt{RS} fomos capazes de ultrapassar este problema. Graças à versatilidade do \emph{GAWK}, facilmente se poderão adicionar novas funcionalidades ao programa e permitir que se analisem novos padrões.

\appendix

\chapter{Código dos Programas}

\section{Conteúdo do ficheiro \texttt{album.gawk}} \label{cod_fich_af}
\begin{verbatim}
function ler_valor_tag(nome_tag, linha) {
    if(linha == "") {
        linha = $0
    }
    match(linha, "<" nome_tag "(\\s+.*)*>(.*)</" nome_tag "\\s*>", arr)
    return arr[2]
}

function ler_atributo_tag(nome_tag, nome_atributo, linha){
    if(linha == "") {
        linha = $0
    }
    regex_atributos = "\\w+\\s*=\\s*(\"[^<\"]*\")|(\\'[^<\\']*\\')"
    temp = gensub(".*<" nome_tag "(\\s+" regex_atributos ")*\\s+" nome_atributo "\\s*=\\s*", "", 1, linha) 
    aspas = substr(temp,0,1)
    split(temp, temp2, aspas)
    ret = temp2[2]
    # se a tag com o atributo pretendido não for encontrada, temp será igual a linha 
    if(temp == linha) {
        ret = ""
    } 
    return ret
}

# função simplificada que põe uma string num formato simplificado do url encode 
function url_encode(linha) {
    ret = gensub("\\s", "+", "G", linha)
    ret = gensub("!", "%21", "G", ret)
    ret = gensub(":", "%3A", "G", ret)
    ret = gensub("'", "%27", "G", ret)
    ret = gensub(",", "%2C", "G", ret)
    return ret
}

BEGIN {
    RS = "</foto"
    output = "album.html"
    html_doctype = "<!DOCTYPE html>"
    html_css = "<link rel=\"stylesheet\" type=\"text/css\" href=\"museu.css\" />"
    html_head = "<head><meta charset=\"UTF-8\"><title> Album Fotográfico </title>" html_css "</head>"
    
    print html_doctype html_head "<html><body>\n<h1> Fotografias </h1><ul>" > output
}

# como se pretende mostrar as pessoas e as fotos onde aparecem, 
# as linhas que não tiverem a tag "quem" não são processadas

/<quem(\s+.*)*/  { 
 
    ficheiro = ler_atributo_tag("foto", "ficheiro")
    pessoas = ler_valor_tag("quem")
    data = ler_atributo_tag("quando", "data") 
    if(data=="") {
        data = ler_valor_tag("quando")
    }
    facto = ler_valor_tag("facto")
    local = ler_valor_tag("onde")
                    
    # regista o local
    locais[local]
                    
    # campos formatados para html
    local_formatado = (local == "")? "" : "<center><p> Local: " local "</p></center>" 
    data_formatada = (data=="")? "" : "<center><p>Data: " data "</p></center> "
    facto_formatado = (facto == "")? "" : "<center><h5>" facto "</h5></center>"
    pessoas_formatado = "<h3><LI><b>" pessoas "</b></LI></h3>" 
    imagem_formatada = "<img src=\"" ficheiro "\"/>"

    entrada = pessoas_formatado "<center>" imagem_formatada "</center>\n" facto_formatado data_formatada local_formatado
    entradas[entrada] = data
}

END { 
    delete locais[""]
    asorti(entradas, copia_entradas,"@val_str_asc")
    for(i in copia_entradas) {
        print copia_entradas[i] > output 
    }
    print "</ul>\n<h1> Locais Fotografados </h1>" > output 
    # ordena os locais alfabeticamente
    asorti(locais)
    # gera o mapa
    url = "https://maps.googleapis.com/maps/api/staticmap?key=AIzaSyAGDCGp6aTCV7_JQC3KNW2X3pmkOJxgMyw&size=640x480&markers="
    for(i in locais) {
        url = url "|" url_encode(locais[i])  
    }
    print "<ul>" > output
    for(i in locais) {
        print "<li> " locais[i] " </li>" > output 
    }
    print "</ul>  <center><img src=\"" url "\"/></center> <hr width=800> <center><p>  Feito por João Pereira(A75273), João Martins(A68646), Manuel Freitas(A71646) </p><img src=\"logoUM.jpg\"  width=\"100\" height=\"50\"></center></body>\n</html>" > output 
}
\end{verbatim}

\section{Conteúdo do ficheiro \texttt{processa-vv.gawk}} \label{cod_fich_vv}
\begin{verbatim}
BEGIN {
    RS = "<TRANSACCAO"
    SEP = "============================================="
    SEP_FICH = "#############################################"
    fmt_extracto = "EXTRACTO Nº: %s\nMES: %s\nNOME: %s\nID: %s\nNIF: %s\n"
    fmt_identificador = "IDENTIFICADOR: %s\nMATRICULA: %s\nREF. PAGAMENTO: %s\n"

    total = total_parques = 0
}

BEGINFILE {
    total_fich = total_parques_fich = 0
    print SEP_FICH
}

# Acção a realizar para cada novo extracto
/<EXTRACTO/ {
    id_extracto = ler_atributo_tag("EXTRACTO", "id", $0)
    mes_emissao = ler_valor_tag("MES_EMISSAO", $0)
    id_cliente = ler_atributo_tag("CLIENTE", "id", $0)
    nif = ler_valor_tag("NIF", $0)
    nome = ler_valor_tag("NOME", $0)

    # fmt_extracto está definido no bloco BEGIN
    printf fmt_extracto, id_extracto, mes_emissao, nome, id_cliente, nif
}

# Acção a realizar para cada transacção
/<\/TRANSACCAO/ {
    importancia = 0
    parque = 0
    split($0, a, /<|>/)
    
    # a[1] tem a string vazia, por isso começamos com i = 2
    for(i = 2; a[i] !~ "/TRANSACCAO"; ++i) {
        if(a[i] ~ /^DATA_ENTRADA/) {
            data = a[i+1]
            if(data != "null")
                ++entradas[data]
        } else if(a[i] ~ /^SAIDA/) {
            ++saidas[a[i+1]]
        } else if(a[i] ~ /^IMPORTANCIA/) {
            importancia = a[i+1]
            ++n_viatura
        } else if(a[i] ~ /^VALOR_DESCONTO/) {
            importancia -= a[i+1]
        } else if(a[i] ~ /^TIPO/) {
            parque = (a[i+1] ~ "Parques de estacionamento")
        }
    }
    total_viatura += importancia
    if(parque)
        total_viatura_parques += importancia
}

/<\/IDENTIFICADOR/ {
    print SEP
    printf fmt_identificador, id, matricula, ref_pagamento
    printf "\nTotal gasto = %.2f EUR\n", total_viatura
    printf "Total gasto em parques = %.2f EUR\n", total_viatura_parques
    
    total_fich += total_viatura
    total_parques_fich += total_viatura_parques
}

# Acção a realizar para cada viatura encontrada
/<IDENTIFICADOR/ {
    id = ler_atributo_tag("IDENTIFICADOR", "id", $0)
    matricula = ler_valor_tag("MATRICULA", $0)
    ref_pagamento = ler_valor_tag("REF_PAGAMENTO", $0)

    total_viatura = total_viatura_parques = 0
}

ENDFILE {
    print SEP "\nRESULTADOS DO MÊS " mes_emissao "\n"

    n = asorti(entradas, d, "cmp_datas")
    print "+------------+-------------+"
    print "| Dia        | N. entradas |"
    print "+------------+-------------+"
    for(i = 1; i <= n; ++i) {
        printf "| %10s | %-11d |\n", d[i], entradas[d[i]]
    }
    print "+------------+-------------+"
    delete entradas

    n = asorti(saidas)
    print "\nLocais de saida:"
    for(i = 1; i <= n; ++i) {
        print "-> " saidas[i]
    }
    delete saidas

    printf "\nTotal gasto = %.2f EUR\n", total_fich
    printf "Total gasto em parques = %.2f EUR\n\n", total_parques_fich
    
    # Atualiza os totais globais
    total += total_fich
    total_parques += total_parques_fich
}

END {
    print SEP_FICH "\nRESULTADOS GLOBAIS\n" SEP_FICH
    printf "Total gasto = %.2f EUR\n", total
    printf "Total gasto em parques = %.2f EUR\n", total_parques
}

# Função que assume que os índices i1 e i2 são datas no formato dd-mm-yyyy
# e devolve -1 se i1 é mais antiga que i2, 0 se i1 == i2 ou 1 caso contrário.
function cmp_datas(i1, v1, i2, v2) {
    split(i1, d1, "-")
    split(i2, d2, "-")
    r = 0
    for(i = 3; !r && i >= 1; --i) {
        if(d1[i] < d2[i])
            r = -1
        else
            r = (d1[i] != d2[i])
    }
    return r
}

function ler_valor_tag(nome_tag, linha) {
    if(linha == "") {
        linha = $0
    }
    match(linha, "<" nome_tag "(\\s+.*)*>(.*)</" nome_tag "\\s*>", arr)
    return arr[2]
}

function ler_atributo_tag(nome_tag, nome_atributo, linha){
    if(linha == "") {
        linha = $0
    }
    regex_atributos = "\\w+\\s*=\\s*(\"[^<\"]*\")|(\\'[^<\\']*\\')"
    temp = gensub(".*<" nome_tag "(\\s+" regex_atributos ")*\\s+" nome_atributo "\\s*=\\s*", "", 1, linha) 
    aspas = substr(temp,0,1)
    split(temp, temp2, aspas)
    ret = temp2[2]
    # se a tag com o atributo pretendido não for encontrada, temp será igual a linha 
    if(temp == linha) {
        ret = ""
    } 
    return ret
}
\end{verbatim}

\chapter{\textit{Input} e \textit{output} dos exemplos/testes}

\section{Album Fotográfico}

\subsection{Conteúdo do ficheiro \texttt{hendrix.xml}} \label{hendrix_in}
\begin{lstlisting}[language=XML]
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE fotos SYSTEM "Users/sony/mp/fotos.dtd">
<fotos>
  <foto ficheiro="hendrix/h1.jpg">
    <quem>Mitch Mitchell, Jimi Hendrix, Noel Redding</quem>
  </foto>
  <foto ficheiro="hendrix/h2.jpeg">
    <onde>Royal Albert Hall, London</onde>
    <quando data="1969-02-18" />
    <quem>Jimi Hendrix</quem>
  </foto>
  <foto ficheiro="hendrix/h3.png">
    <onde>Royal Albert Hall, London</onde>
    <quando data="1969-02-18" />
    <quem>Jimi Hendrix, Noel Redding</quem>
  </foto>
  <foto ficheiro="hendrix/h4.jpg">
    <quem>Jimi Hendrix, Johnny Winter</quem>
  </foto>
  <foto ficheiro="hendrix/h5.jpg">
    <quem>John Paul Jones, Jimi Hendrix</quem>
  </foto>
  <foto ficheiro="hendrix/h6.jpg">
    <quem>Jimi Hendrix, Mick Jagger</quem>
  </foto>
  <foto ficheiro="hendrix/h7.jpg">
    <quem>Roger Daltrey, Pete Townshend, Jimi Hendrix, John Entwistle, Keith Moon</quem>
  </foto>
  <foto ficheiro="hendrix/h8.jpg">
    <onde>34 Montagu Square, London</onde>
    <quando>1967</quando>
    <quem>Jimi Hendrix</quem>
    <facto>Por Petra Niemeier</facto>
  </foto>
  <foto ficheiro="hendrix/h9.jpg">
    <onde>Fillmore East, New York</onde>
    <quando data="1969-12-31" />
    <quem>Jimi Hendrix</quem>
    <facto>Os Band of Gypsys deram 2 concertos no último dia de 1969, e dois no primeiro dia de 1970, em Fillmore East.</facto>
  </foto>
  <foto ficheiro="hendrix/h10.jpg">
    <onde>Montagu Place, W.1.</onde>
    <quem>Jimi Hendrix</quem>
  </foto>
  <foto ficheiro="hendrix/h11.jpg">
    <quando data="1969-08-18" />
    <onde>Woodstock</onde>
    <quem>Jimi Hendrix</quem>
    <facto>Aqui já no encore, no qual toca a Hey Joe a pedido do público</facto>
  </foto>
  <foto ficheiro="hendrix/h12.jpg">
    <quando data="1969-08-18" />
    <onde>Woodstock</onde>
    <quem>Jimi Hendrix, Billy Cox</quem>
    <facto>Devido a atrasos no alinhamento, tiveram de tocar no dia a seguir ao suposto final do festival</facto>
  </foto>
  <foto ficheiro="hendrix/h13.jpg">
    <quando data="1970-07-04" />
    <onde>Byron, Georgia</onde>
    <quem>Jimi Hendrix</quem>
    <facto>Atlant Pop Festival</facto>
  </foto>
  <foto ficheiro="hendrix/h14.jpg">
    <quando data="1967-07-18" />
    <onde>Monterey, California</onde>
    <quem>Jimi Hendrix</quem>
    <facto>O concerto no Monterey Pop Festival foi o primeiro concerto do Hendrix na América, com uma "pequena" ajuda do amigo Paul McCartney. Tocaram a seguir aos The Who no dia de nomes como Scott McKenzie, Greatful Dead e The Mamas and Pappas</facto>
  </foto>
  <foto ficheiro="hendrix/h15.jpg">
    <quando data="1970-09-05" />
    <onde>Fehmarn, Germany</onde>
    <quem>Jimi Hendrix</quem>
    <facto>Hendrix no dia anterior ao do último concerto que haveria de tocar</facto>
  </foto>
  <foto ficheiro="hendrix/h16.jpg">
    <quando data="1970-09-06" />
    <onde>Fehmarn, Germany</onde>
    <quem>Jimi Hendrix</quem>
    <facto>Último concerto em que haveria de tocar antes da sua trágica morte apenas 12 dias depois</facto>
  </foto>
  <foto ficheiro="hendrix/h17.jpg">
    <quando data="1970-08-30" />
    <onde>Isle of Wight, England</onde>
    <quem>Jimi Hendrix</quem>
  </foto>
  <foto ficheiro="hendrix/h18.jpeg">
    <quando>1961</quando>
    <onde>Montgomery, AL</onde>
    <quem>Jimi Hendrix</quem>
    <facto>No Elks Club. Quando esteve em Fort Benning, ele costumava ir até ao Elks Club em Montgomery aos fins de semana para tocar com nomes como B.B.King.</facto>
  </foto>
  <foto ficheiro="hendrix/h19.jpg">
    <quando>1948</quando>
    <quem>Al, Lucille, Jimi e Leon Hendrix</quem>
    <facto>Foto rara da família toda reunida. Os pais, Al e Lucille, discutiam frequentemente e chegavam mesmo a lutar um com o outro sob a influência do álcool. Leon estava sempre num vai e vem entre os Hendrix e famílias de acolhimento. Lucille teve mais 3 filhos, que deram para adopção ou famílias de acolhimento. Passado algum tempo Al conseguiu o divórcio e a custódia de Jimi e Leon.</facto>
  </foto>
  <foto ficheiro="hendrix/h20.jpg">
    <quem>Al e Jimi Hendrix</quem>
    <facto>Al viu o filho pela primeira vez apenas 3 anos após o seu nascimento. Jimi nasceu na altura da segunda guerra mundial, e Al estava em serviço e não o deixaram sair para estar presente no nascimento.</facto>
  </foto>
  <foto ficheiro="hendrix/h21.jpg">
    <quando>1942</quando>
    <quem>Lucille Jetter Hendrix, Jimi Hendrix</quem>
    <facto>Tirada no ano do seu nascimento.</facto>
  </foto>
</fotos>
\end{lstlisting}

\subsection{Excerto do album fotográfico produzido a partir de \texttt{hendrix.xml}} \label{hendrix_out}

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=0.8\textwidth]{HendrixPrtScr1.png}
    \caption{Excerto do album fotográfico produzido a partir de \texttt{hendrix.xml}}
    \label{fig:hendrix1}
\end{figure}

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=0.8\textwidth]{HendrixPrtScr2.png}
    \caption{Lista dos locais fotografados e respetiva representação num mapa, para \texttt{hendrix.xml}}
    \label{fig:hendrix2}
\end{figure}

\section{Via Verde}

\subsection{Resultados do processamento do extracto \texttt{viaverde.xml}} \label{vv_out}

\textbf{Nota:} Dado que o ficheiro \texttt{viaverde.xml} foi disponibilizado pela equipa docente, optou-se por não incluir o seu conteúdo no relatório. Abaixo seguem-se os resultados produzidos pelo programa \texttt{processa-vv.gawk} para esse extracto.

\begin{verbatim}
#############################################
EXTRACTO Nº: 011114056/08/2015
MES: Ago-2015
NOME: PEDRO MANUEL RANGEL SANTOS HENRIQUES
ID: 514714936
NIF: 987653210
=============================================
IDENTIFICADOR: 28876820811
MATRICULA: 00-LJ-11
REF. PAGAMENTO: 1234567

Total gasto = 77,40 EUR
Total gasto em parques = 6,35 EUR
=============================================
RESULTADOS DO MÊS Ago-2015

+------------+-------------+
| Dia        | N. entradas |
+------------+-------------+
| 26-07-2015 | 3           |
| 29-07-2015 | 2           |
| 30-07-2015 | 3           |
| 31-07-2015 | 1           |
| 06-08-2015 | 4           |
| 10-08-2015 | 7           |
| 11-08-2015 | 2           |
| 13-08-2015 | 5           |
| 17-08-2015 | 4           |
| 18-08-2015 | 2           |
| 21-08-2015 | 4           |
+------------+-------------+

Locais de saida:
-> Aeroporto
-> Angeiras N-S
-> Braga Sul
-> Custoias
-> EN 205 PV
-> EN107
-> Ermesinde PV
-> Ferreiros
-> Freixieiro
-> Lipor
-> Maia II
-> Maia PV
-> Neiva N-S
-> Neiva S-N
-> PQ A Sa Carn.I
-> PQ Av. Central
-> Ponte Pedra
-> Povoa S-N
-> Valongo

Total gasto = 77,40 EUR
Total gasto em parques = 6,35 EUR

#############################################
RESULTADOS GLOBAIS
#############################################
Total gasto = 77,40 EUR
Total gasto em parques = 6,35 EUR
\end{verbatim}

\subsection{Conteúdo do ficheiro \texttt{viaverde-mar.xml}} \label{vv_mar}

\begin{lstlisting}[language=XML]
<?xml version="1.0" encoding="utf-8"?>
<EXTRACTO id="003396951/03/2016">
    <MES_EMISSAO>Mar-2016</MES_EMISSAO>
    <CLIENTE id="388725700">
        <NIF>987654321</NIF>
        <NOME>JULIO MANUEL SOUSA BARREIROS MARTINS</NOME>
        <MORADA>RUA XXX</MORADA>
        <LOCALIDADE>BRAGA</LOCALIDADE>
        <CODIGO_POSTAL>4715-193 BRAGA</LOCALIDADE>
    </CLIENTE>
    <IDENTIFICADOR id="22596322810">
        <MATRICULA>59-IB-21</MATRICULA>
        <REF_PAGAMENTO>12334567</REF_PAGAMENTO>
        <TRANSACCAO>
            <DATA_ENTRADA>22-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>09:43</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>22-03-2016</DATA_SAIDA>
            <HORA_SAIDA>09:50</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>22-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>15:41</HORA_ENTRADA>
            <ENTRADA>Guimaraes</ENTRADA>
            <DATA_SAIDA>22-03-2016</DATA_SAIDA>
            <HORA_SAIDA>15:48</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>23-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>17:18</HORA_ENTRADA>
            <ENTRADA>Ave</ENTRADA>
            <DATA_SAIDA>23-03-2016</DATA_SAIDA>
            <HORA_SAIDA>17:22</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>0,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>23-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>17:25</HORA_ENTRADA>
            <ENTRADA>Guimaraes</ENTRADA>
            <DATA_SAIDA>23-03-2016</DATA_SAIDA>
            <HORA_SAIDA>17:39</HORA_SAIDA>
            <SAIDA>Lousada</SAIDA>
            <IMPORTANCIA>2,65</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>null</DATA_ENTRADA>
            <HORA_ENTRADA />
            <ENTRADA />
            <DATA_SAIDA>23-03-2016</DATA_SAIDA>
            <HORA_SAIDA>17:41</HORA_SAIDA>
            <SAIDA>EN106 Norte E/O</SAIDA>
            <IMPORTANCIA>0,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (P3)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>null</DATA_ENTRADA>
            <HORA_ENTRADA />
            <ENTRADA />
            <DATA_SAIDA>26-03-2016</DATA_SAIDA>
            <HORA_SAIDA>17:32</HORA_SAIDA>
            <SAIDA>Lousada O/E</SAIDA>
            <IMPORTANCIA>0,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (P3)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>26-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>17:34</HORA_ENTRADA>
            <ENTRADA>Lousada</ENTRADA>
            <DATA_SAIDA>26-03-2016</DATA_SAIDA>
            <HORA_SAIDA>17:56</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>4,20</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TOTAL>11,60</TOTAL>
    </IDENTIFICADOR>
    <IDENTIFICADOR id="313290848669">
        <MATRICULA>17-EM-08</MATRICULA>
        <REF_PAGAMENTO>12334567</REF_PAGAMENTO>
        <TRANSACCAO>
            <DATA_ENTRADA>23-02-2016</DATA_ENTRADA>
            <HORA_ENTRADA>09:22</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>23-02-2016</DATA_SAIDA>
            <HORA_SAIDA>09:29</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>03-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>23-02-2016</DATA_ENTRADA>
            <HORA_ENTRADA>17:04</HORA_ENTRADA>
            <ENTRADA>Guimaraes</ENTRADA>
            <DATA_SAIDA>23-02-2016</DATA_SAIDA>
            <HORA_SAIDA>17:10</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>03-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>24-02-2016</DATA_ENTRADA>
            <HORA_ENTRADA>12:47</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>24-02-2016</DATA_SAIDA>
            <HORA_SAIDA>12:53</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>03-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>24-02-2016</DATA_ENTRADA>
            <HORA_ENTRADA>16:18</HORA_ENTRADA>
            <ENTRADA>Guimaraes</ENTRADA>
            <DATA_SAIDA>24-02-2016</DATA_SAIDA>
            <HORA_SAIDA>16:25</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>03-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>29-02-2016</DATA_ENTRADA>
            <HORA_ENTRADA>08:24</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>29-02-2016</DATA_SAIDA>
            <HORA_SAIDA>08:30</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>14-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>01-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>09:13</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>01-03-2016</DATA_SAIDA>
            <HORA_SAIDA>09:19</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>14-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>01-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>16:37</HORA_ENTRADA>
            <ENTRADA>Guimaraes</ENTRADA>
            <DATA_SAIDA>01-03-2016</DATA_SAIDA>
            <HORA_SAIDA>16:43</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>14-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>05-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>17:20</HORA_ENTRADA>
            <ENTRADA>Braga Sul</ENTRADA>
            <DATA_SAIDA>05-03-2016</DATA_SAIDA>
            <HORA_SAIDA>17:36</HORA_SAIDA>
            <SAIDA>Maia PV</SAIDA>
            <IMPORTANCIA>3,25</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>Brisa Concessão Rodoviária (BR)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>14-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>05-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>19:19</HORA_ENTRADA>
            <ENTRADA>Ermesinde PV</ENTRADA>
            <DATA_SAIDA>05-03-2016</DATA_SAIDA>
            <HORA_SAIDA>19:32</HORA_SAIDA>
            <SAIDA>Guilhufe</SAIDA>
            <IMPORTANCIA>1,85</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>Brisa Concessão Rodoviária (BR)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>14-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>null</DATA_ENTRADA>
            <HORA_ENTRADA />
            <ENTRADA />
            <DATA_SAIDA>06-03-2016</DATA_SAIDA>
            <HORA_SAIDA>17:48</HORA_SAIDA>
            <SAIDA>Lousada O/E</SAIDA>
            <IMPORTANCIA>0,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (P3)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>14-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>06-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>17:50</HORA_ENTRADA>
            <ENTRADA>Lousada</ENTRADA>
            <DATA_SAIDA>06-03-2016</DATA_SAIDA>
            <HORA_SAIDA>18:10</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>4,20</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>14-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>07-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>08:08</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>07-03-2016</DATA_SAIDA>
            <HORA_SAIDA>08:15</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>08-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>09:36</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>08-03-2016</DATA_SAIDA>
            <HORA_SAIDA>09:42</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>08-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>15:51</HORA_ENTRADA>
            <ENTRADA>Guimaraes</ENTRADA>
            <DATA_SAIDA>08-03-2016</DATA_SAIDA>
            <HORA_SAIDA>15:58</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>09-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>09:08</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>09-03-2016</DATA_SAIDA>
            <HORA_SAIDA>09:15</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>09-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>17:11</HORA_ENTRADA>
            <ENTRADA>Guimaraes</ENTRADA>
            <DATA_SAIDA>09-03-2016</DATA_SAIDA>
            <HORA_SAIDA>17:17</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>10-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>07:49</HORA_ENTRADA>
            <ENTRADA>Braga Sul</ENTRADA>
            <DATA_SAIDA>10-03-2016</DATA_SAIDA>
            <HORA_SAIDA>08:07</HORA_SAIDA>
            <SAIDA>Maia PV</SAIDA>
            <IMPORTANCIA>3,25</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>Brisa Concessão Rodoviária (BR)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>10-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>10:23</HORA_ENTRADA>
            <ENTRADA>Maia PV</ENTRADA>
            <DATA_SAIDA>10-03-2016</DATA_SAIDA>
            <HORA_SAIDA>10:36</HORA_SAIDA>
            <SAIDA>Cruz</SAIDA>
            <IMPORTANCIA>2,05</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>Brisa Concessão Rodoviária (BR)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>13-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>18:06</HORA_ENTRADA>
            <ENTRADA>Ferreiros</ENTRADA>
            <DATA_SAIDA>13-03-2016</DATA_SAIDA>
            <HORA_SAIDA>18:13</HORA_SAIDA>
            <SAIDA>Barcelos</SAIDA>
            <IMPORTANCIA>1,40</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>13-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>18:49</HORA_ENTRADA>
            <ENTRADA>Neiva N-S</ENTRADA>
            <DATA_SAIDA>13-03-2016</DATA_SAIDA>
            <HORA_SAIDA>18:55</HORA_SAIDA>
            <SAIDA>Esposende N-S</SAIDA>
            <IMPORTANCIA>1,70</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (N1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>13-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>18:59</HORA_ENTRADA>
            <ENTRADA>EN 205 PV</ENTRADA>
            <DATA_SAIDA>13-03-2016</DATA_SAIDA>
            <HORA_SAIDA>19:11</HORA_SAIDA>
            <SAIDA>Ferreiros</SAIDA>
            <IMPORTANCIA>2,60</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>14-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>08:18</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>14-03-2016</DATA_SAIDA>
            <HORA_SAIDA>08:24</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>15-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>09:31</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>15-03-2016</DATA_SAIDA>
            <HORA_SAIDA>09:37</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>15-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>15:07</HORA_ENTRADA>
            <ENTRADA>Guimaraes</ENTRADA>
            <DATA_SAIDA>15-03-2016</DATA_SAIDA>
            <HORA_SAIDA>15:14</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>16-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>13:45</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>16-03-2016</DATA_SAIDA>
            <HORA_SAIDA>13:52</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>16-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>15:53</HORA_ENTRADA>
            <ENTRADA>Guimaraes</ENTRADA>
            <DATA_SAIDA>16-03-2016</DATA_SAIDA>
            <HORA_SAIDA>15:59</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>19-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>14:06</HORA_ENTRADA>
            <ENTRADA>Cruz</ENTRADA>
            <DATA_SAIDA>19-03-2016</DATA_SAIDA>
            <HORA_SAIDA>14:19</HORA_SAIDA>
            <SAIDA>Maia PV</SAIDA>
            <IMPORTANCIA>2,05</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>Brisa Concessão Rodoviária (BR)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>19-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>17:15</HORA_ENTRADA>
            <ENTRADA>Ermesinde PV</ENTRADA>
            <DATA_SAIDA>19-03-2016</DATA_SAIDA>
            <HORA_SAIDA>17:29</HORA_SAIDA>
            <SAIDA>Penafiel</SAIDA>
            <IMPORTANCIA>2,00</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>Brisa Concessão Rodoviária (BR)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>null</DATA_ENTRADA>
            <HORA_ENTRADA />
            <ENTRADA />
            <DATA_SAIDA>21-03-2016</DATA_SAIDA>
            <HORA_SAIDA>08:42</HORA_SAIDA>
            <SAIDA>Lousada O/E</SAIDA>
            <IMPORTANCIA>0,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (P3)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>21-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>08:44</HORA_ENTRADA>
            <ENTRADA>Lousada</ENTRADA>
            <DATA_SAIDA>21-03-2016</DATA_SAIDA>
            <HORA_SAIDA>08:56</HORA_SAIDA>
            <SAIDA>Guimaraes Sul</SAIDA>
            <IMPORTANCIA>2,05</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>23-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>15:31</HORA_ENTRADA>
            <ENTRADA></ENTRADA>
            <DATA_SAIDA>23-03-2016</DATA_SAIDA>
            <HORA_SAIDA>16:28</HORA_SAIDA>
            <SAIDA>PQ Av. Central</SAIDA>
            <IMPORTANCIA>1,40</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>BRAGAPARQUES (BP)</OPERADOR>
            <TIPO>Parques de estacionamento</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>24-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>09:55</HORA_ENTRADA>
            <ENTRADA></ENTRADA>
            <DATA_SAIDA>24-03-2016</DATA_SAIDA>
            <HORA_SAIDA>10:28</HORA_SAIDA>
            <SAIDA>PQ S. Marcos</SAIDA>
            <IMPORTANCIA>1,10</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>BRAGAPARQUES (BP)</OPERADOR>
            <TIPO>Parques de estacionamento</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>24-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>16:33</HORA_ENTRADA>
            <ENTRADA></ENTRADA>
            <DATA_SAIDA>24-03-2016</DATA_SAIDA>
            <HORA_SAIDA>17:17</HORA_SAIDA>
            <SAIDA>PQ Av. Central</SAIDA>
            <IMPORTANCIA>1,00</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>BRAGAPARQUES (BP)</OPERADOR>
            <TIPO>Parques de estacionamento</TIPO>
            <DATA_DEBITO>31-03-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TOTAL>57,35</TOTAL>
    </IDENTIFICADOR>
    <TOTAL>68,95</TOTAL>
    <TOTAL_IVA>15,86</TOTAL_IVA>
</EXTRACTO>
\end{lstlisting}

\subsection{Conteúdo do ficheiro \texttt{viaverde-abr.xml}} \label{vv_abr}

\begin{lstlisting}[language=XML]
<?xml version="1.0" encoding="utf-8"?>
<EXTRACTO id="005507389/04/2016">
    <MES_EMISSAO>Abr-2016</MES_EMISSAO>
    <CLIENTE id="388725700">
        <NIF>987654321</NIF>
        <NOME>JULIO MANUEL SOUSA BARREIROS MARTINS</NOME>
        <MORADA>RUA XXX</MORADA>
        <LOCALIDADE>BRAGA</LOCALIDADE>
        <CODIGO_POSTAL>4715-193 BRAGA</LOCALIDADE>
    </CLIENTE>
    <IDENTIFICADOR id="22596322810">
        <MATRICULA>59-IB-21</MATRICULA>
        <REF_PAGAMENTO>12334567</REF_PAGAMENTO>
        <TRANSACCAO>
            <DATA_ENTRADA>27-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>12:20</HORA_ENTRADA>
            <ENTRADA>Ferreiros</ENTRADA>
            <DATA_SAIDA>27-03-2016</DATA_SAIDA>
            <HORA_SAIDA>12:31</HORA_SAIDA>
            <SAIDA>EN 205 PV</SAIDA>
            <IMPORTANCIA>2,60</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>05-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>27-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>17:44</HORA_ENTRADA>
            <ENTRADA>EN 205 PV</ENTRADA>
            <DATA_SAIDA>27-03-2016</DATA_SAIDA>
            <HORA_SAIDA>17:58</HORA_SAIDA>
            <SAIDA>Ferreiros</SAIDA>
            <IMPORTANCIA>2,60</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>05-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>29-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>09:25</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>29-03-2016</DATA_SAIDA>
            <HORA_SAIDA>09:31</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>07-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>29-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>15:56</HORA_ENTRADA>
            <ENTRADA>Guimaraes</ENTRADA>
            <DATA_SAIDA>29-03-2016</DATA_SAIDA>
            <HORA_SAIDA>16:03</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>07-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TOTAL>8,30</TOTAL>
    </IDENTIFICADOR>
    <IDENTIFICADOR id="313290848669">
        <MATRICULA>17-EM-08</MATRICULA>
        <REF_PAGAMENTO>12334567</REF_PAGAMENTO>
        <TRANSACCAO>
            <DATA_ENTRADA>27-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>12:20</HORA_ENTRADA>
            <ENTRADA>Ferreiros</ENTRADA>
            <DATA_SAIDA>27-03-2016</DATA_SAIDA>
            <HORA_SAIDA>12:26</HORA_SAIDA>
            <SAIDA>Barcelos</SAIDA>
            <IMPORTANCIA>1,40</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>05-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>null</DATA_ENTRADA>
            <HORA_ENTRADA />
            <ENTRADA />
            <DATA_SAIDA>27-03-2016</DATA_SAIDA>
            <HORA_SAIDA>17:06</HORA_SAIDA>
            <SAIDA>Esposende N-S</SAIDA>
            <IMPORTANCIA>1,05</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (N1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>05-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>27-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>17:10</HORA_ENTRADA>
            <ENTRADA>EN 205 PV</ENTRADA>
            <DATA_SAIDA>27-03-2016</DATA_SAIDA>
            <HORA_SAIDA>17:21</HORA_SAIDA>
            <SAIDA>Ferreiros</SAIDA>
            <IMPORTANCIA>2,60</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>05-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>30-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>15:15</HORA_ENTRADA>
            <ENTRADA>Ferreiros</ENTRADA>
            <DATA_SAIDA>30-03-2016</DATA_SAIDA>
            <HORA_SAIDA>15:22</HORA_SAIDA>
            <SAIDA>Barcelos</SAIDA>
            <IMPORTANCIA>1,40</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>07-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>31-03-2016</DATA_ENTRADA>
            <HORA_ENTRADA>13:42</HORA_ENTRADA>
            <ENTRADA>Barcelos</ENTRADA>
            <DATA_SAIDA>31-03-2016</DATA_SAIDA>
            <HORA_SAIDA>13:48</HORA_SAIDA>
            <SAIDA>Ferreiros</SAIDA>
            <IMPORTANCIA>1,40</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>07-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>02-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>19:38</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>02-04-2016</DATA_SAIDA>
            <HORA_SAIDA>19:58</HORA_SAIDA>
            <SAIDA>Lousada</SAIDA>
            <IMPORTANCIA>4,20</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>07-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>null</DATA_ENTRADA>
            <HORA_ENTRADA />
            <ENTRADA />
            <DATA_SAIDA>02-04-2016</DATA_SAIDA>
            <HORA_SAIDA>20:01</HORA_SAIDA>
            <SAIDA>EN106 Norte E/O</SAIDA>
            <IMPORTANCIA>0,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (P3)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>14-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>null</DATA_ENTRADA>
            <HORA_ENTRADA />
            <ENTRADA />
            <DATA_SAIDA>03-04-2016</DATA_SAIDA>
            <HORA_SAIDA>16:31</HORA_SAIDA>
            <SAIDA>Lousada O/E</SAIDA>
            <IMPORTANCIA>0,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (P3)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>14-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>03-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>16:33</HORA_ENTRADA>
            <ENTRADA>Lousada</ENTRADA>
            <DATA_SAIDA>03-04-2016</DATA_SAIDA>
            <HORA_SAIDA>16:54</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>4,20</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>14-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>04-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>08:02</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>04-04-2016</DATA_SAIDA>
            <HORA_SAIDA>08:09</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>14-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>04-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>13:09</HORA_ENTRADA>
            <ENTRADA>Guimaraes</ENTRADA>
            <DATA_SAIDA>04-04-2016</DATA_SAIDA>
            <HORA_SAIDA>13:16</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>14-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>05-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>09:27</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>05-04-2016</DATA_SAIDA>
            <HORA_SAIDA>09:33</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>14-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>10-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>11:21</HORA_ENTRADA>
            <ENTRADA>Ferreiros</ENTRADA>
            <DATA_SAIDA>10-04-2016</DATA_SAIDA>
            <HORA_SAIDA>11:28</HORA_SAIDA>
            <SAIDA>Barcelos</SAIDA>
            <IMPORTANCIA>1,40</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>null</DATA_ENTRADA>
            <HORA_ENTRADA />
            <ENTRADA />
            <DATA_SAIDA>10-04-2016</DATA_SAIDA>
            <HORA_SAIDA>17:54</HORA_SAIDA>
            <SAIDA>Esposende N-S</SAIDA>
            <IMPORTANCIA>1,05</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (N1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>10-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>17:58</HORA_ENTRADA>
            <ENTRADA>EN 205 PV</ENTRADA>
            <DATA_SAIDA>10-04-2016</DATA_SAIDA>
            <HORA_SAIDA>18:10</HORA_SAIDA>
            <SAIDA>Ferreiros</SAIDA>
            <IMPORTANCIA>2,60</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>11-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>08:25</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>11-04-2016</DATA_SAIDA>
            <HORA_SAIDA>08:32</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>11-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>12:41</HORA_ENTRADA>
            <ENTRADA>Guimaraes</ENTRADA>
            <DATA_SAIDA>11-04-2016</DATA_SAIDA>
            <HORA_SAIDA>12:47</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>12-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>09:24</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>12-04-2016</DATA_SAIDA>
            <HORA_SAIDA>09:30</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>12-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>14:38</HORA_ENTRADA>
            <ENTRADA>Guimaraes</ENTRADA>
            <DATA_SAIDA>12-04-2016</DATA_SAIDA>
            <HORA_SAIDA>14:45</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>16-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>19:25</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>16-04-2016</DATA_SAIDA>
            <HORA_SAIDA>19:44</HORA_SAIDA>
            <SAIDA>Lousada</SAIDA>
            <IMPORTANCIA>4,20</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>21-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>null</DATA_ENTRADA>
            <HORA_ENTRADA />
            <ENTRADA />
            <DATA_SAIDA>16-04-2016</DATA_SAIDA>
            <HORA_SAIDA>19:46</HORA_SAIDA>
            <SAIDA>EN106 Norte E/O</SAIDA>
            <IMPORTANCIA>0,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (P3)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>30-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>null</DATA_ENTRADA>
            <HORA_ENTRADA />
            <ENTRADA />
            <DATA_SAIDA>17-04-2016</DATA_SAIDA>
            <HORA_SAIDA>16:48</HORA_SAIDA>
            <SAIDA>Lousada O/E</SAIDA>
            <IMPORTANCIA>0,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (P3)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>30-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>17-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>16:50</HORA_ENTRADA>
            <ENTRADA>Lousada</ENTRADA>
            <DATA_SAIDA>17-04-2016</DATA_SAIDA>
            <HORA_SAIDA>17:10</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>4,20</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>30-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>18-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>08:16</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>18-04-2016</DATA_SAIDA>
            <HORA_SAIDA>08:23</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>30-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>18-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>12:15</HORA_ENTRADA>
            <ENTRADA>Guimaraes</ENTRADA>
            <DATA_SAIDA>18-04-2016</DATA_SAIDA>
            <HORA_SAIDA>12:22</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>30-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>19-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>11:28</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>19-04-2016</DATA_SAIDA>
            <HORA_SAIDA>11:35</HORA_SAIDA>
            <SAIDA>Guimaraes</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>30-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>19-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>14:22</HORA_ENTRADA>
            <ENTRADA>Guimaraes</ENTRADA>
            <DATA_SAIDA>19-04-2016</DATA_SAIDA>
            <HORA_SAIDA>14:28</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>1,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>30-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>23-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>16:09</HORA_ENTRADA>
            <ENTRADA>Figueiredo No</ENTRADA>
            <DATA_SAIDA>23-04-2016</DATA_SAIDA>
            <HORA_SAIDA>16:28</HORA_SAIDA>
            <SAIDA>Lousada</SAIDA>
            <IMPORTANCIA>4,20</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>30-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>null</DATA_ENTRADA>
            <HORA_ENTRADA />
            <ENTRADA />
            <DATA_SAIDA>23-04-2016</DATA_SAIDA>
            <HORA_SAIDA>16:31</HORA_SAIDA>
            <SAIDA>EN106 Norte E/O</SAIDA>
            <IMPORTANCIA>0,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (P3)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>30-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>null</DATA_ENTRADA>
            <HORA_ENTRADA />
            <ENTRADA />
            <DATA_SAIDA>24-04-2016</DATA_SAIDA>
            <HORA_SAIDA>13:04</HORA_SAIDA>
            <SAIDA>Lousada O/E</SAIDA>
            <IMPORTANCIA>0,55</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (P3)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>30-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>24-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>13:07</HORA_ENTRADA>
            <ENTRADA>Lousada</ENTRADA>
            <DATA_SAIDA>24-04-2016</DATA_SAIDA>
            <HORA_SAIDA>13:27</HORA_SAIDA>
            <SAIDA>Figueiredo No</SAIDA>
            <IMPORTANCIA>4,20</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>30-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>24-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>18:42</HORA_ENTRADA>
            <ENTRADA>Ferreiros</ENTRADA>
            <DATA_SAIDA>24-04-2016</DATA_SAIDA>
            <HORA_SAIDA>18:48</HORA_SAIDA>
            <SAIDA>Barcelos</SAIDA>
            <IMPORTANCIA>1,40</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>30-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TRANSACCAO>
            <DATA_ENTRADA>25-04-2016</DATA_ENTRADA>
            <HORA_ENTRADA>16:57</HORA_ENTRADA>
            <ENTRADA>EN 205 PV</ENTRADA>
            <DATA_SAIDA>25-04-2016</DATA_SAIDA>
            <HORA_SAIDA>17:09</HORA_SAIDA>
            <SAIDA>Ferreiros</SAIDA>
            <IMPORTANCIA>2,60</IMPORTANCIA>
            <VALOR_DESCONTO>0,00</VALOR_DESCONTO>
            <TAXA_IVA>23</TAXA_IVA>
            <OPERADOR>I. de Portugal (E1)</OPERADOR>
            <TIPO>Portagens</TIPO>
            <DATA_DEBITO>30-04-2016</DATA_DEBITO>
            <CARTAO>6749021</CARTAO>
        </TRANSACCAO>
        <TOTAL>62,45</TOTAL>
    </IDENTIFICADOR>
    <TOTAL>70,75</TOTAL>
    <TOTAL_IVA>16,27</TOTAL_IVA>
</EXTRACTO>
\end{lstlisting}

\subsection{Resultados do processamento dos extractos \texttt{viaverde-mar.xml} e \texttt{viaverde-abr.xml}} \label{vv_mar_abr_out}

Utilizando o \textit{script} \texttt{processa-vv.gawk} para processar os extractos \texttt{viaverde-mar.xml} e \texttt{viaverde-abr.xml} pela ordem em que foram indicados, obtém-se os seguintes resultados:

\begin{verbatim}
#############################################
EXTRACTO Nº: 003396951/03/2016
MES: Mar-2016
NOME: JULIO MANUEL SOUSA BARREIROS MARTINS
ID: 388725700
NIF: 987654321
=============================================
IDENTIFICADOR: 22596322810
MATRICULA: 59-IB-21
REF. PAGAMENTO: 12334567

Total gasto = 11,60 EUR
Total gasto em parques = 0,00 EUR
=============================================
IDENTIFICADOR: 313290848669
MATRICULA: 17-EM-08
REF. PAGAMENTO: 12334567

Total gasto = 57,35 EUR
Total gasto em parques = 3,50 EUR
=============================================
RESULTADOS DO MÊS Mar-2016

+------------+-------------+
| Dia        | N. entradas |
+------------+-------------+
| 23-02-2016 | 2           |
| 24-02-2016 | 2           |
| 29-02-2016 | 1           |
| 01-03-2016 | 2           |
| 05-03-2016 | 2           |
| 06-03-2016 | 1           |
| 07-03-2016 | 1           |
| 08-03-2016 | 2           |
| 09-03-2016 | 2           |
| 10-03-2016 | 2           |
| 13-03-2016 | 3           |
| 14-03-2016 | 1           |
| 15-03-2016 | 2           |
| 16-03-2016 | 2           |
| 19-03-2016 | 2           |
| 21-03-2016 | 1           |
| 22-03-2016 | 2           |
| 23-03-2016 | 3           |
| 24-03-2016 | 2           |
| 26-03-2016 | 1           |
+------------+-------------+

Locais de saida:
-> Barcelos
-> Cruz
-> EN106 Norte E/O
-> Esposende N-S
-> Ferreiros
-> Figueiredo No
-> Guilhufe
-> Guimaraes
-> Guimaraes Sul
-> Lousada
-> Lousada O/E
-> Maia PV
-> PQ Av. Central
-> PQ S. Marcos
-> Penafiel

Total gasto = 68,95 EUR
Total gasto em parques = 3,50 EUR

#############################################
EXTRACTO Nº: 005507389/04/2016
MES: Abr-2016
NOME: JULIO MANUEL SOUSA BARREIROS MARTINS
ID: 388725700
NIF: 987654321
=============================================
IDENTIFICADOR: 22596322810
MATRICULA: 59-IB-21
REF. PAGAMENTO: 12334567

Total gasto = 8,30 EUR
Total gasto em parques = 0,00 EUR
=============================================
IDENTIFICADOR: 313290848669
MATRICULA: 17-EM-08
REF. PAGAMENTO: 12334567

Total gasto = 62,45 EUR
Total gasto em parques = 0,00 EUR
=============================================
RESULTADOS DO MÊS Abr-2016

+------------+-------------+
| Dia        | N. entradas |
+------------+-------------+
| 27-03-2016 | 4           |
| 29-03-2016 | 2           |
| 30-03-2016 | 1           |
| 31-03-2016 | 1           |
| 02-04-2016 | 1           |
| 03-04-2016 | 1           |
| 04-04-2016 | 2           |
| 05-04-2016 | 1           |
| 10-04-2016 | 2           |
| 11-04-2016 | 2           |
| 12-04-2016 | 2           |
| 16-04-2016 | 1           |
| 17-04-2016 | 1           |
| 18-04-2016 | 2           |
| 19-04-2016 | 2           |
| 23-04-2016 | 1           |
| 24-04-2016 | 2           |
| 25-04-2016 | 1           |
+------------+-------------+

Locais de saida:
-> Barcelos
-> EN 205 PV
-> EN106 Norte E/O
-> Esposende N-S
-> Ferreiros
-> Figueiredo No
-> Guimaraes
-> Lousada
-> Lousada O/E

Total gasto = 70,75 EUR
Total gasto em parques = 0,00 EUR

#############################################
RESULTADOS GLOBAIS
#############################################
Total gasto = 139,70 EUR
Total gasto em parques = 3,50 EUR
\end{verbatim}

%\begin{lstlisting}[caption={Exemplo de uma Listagem}, label={lstExe1}]
%llll sanjdb c kjnjcnjnjj mmmmmmmmmmmmm hhhhhhhhhhhhhhhhhhhhhhhh jjjjjjjjjjjjjjjjjjjjjjjjjjjj kkkkkkkkkkkkkkkkkk
%      ou então aparecer aqui neste sítio um pouco de matematica $\$$
%      como alternativa ao anterior.
%      e aqui mais um teste $\varepsilon$
%\end{lstlisting}

%É ainda possível importar diretamente o ficheiro:
%\lstinputlisting{plfiltrobase.l} %input de um ficheiro


\bibliographystyle{alpha}
\bibliography{relprojLayout}
\end{document} 
